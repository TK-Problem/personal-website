<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.335">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Tomas Kristijonas Uždavinys">
<meta name="dcterms.date" content="2023-03-11">

<title>Tomas Kristijonas Uždavinys - Exports in Lithuania</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

<script src="../../site_libs/kePrint-0.0.1/kePrint.js"></script>
<link href="../../site_libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<script src="../../site_libs/htmlwidgets-1.6.1/htmlwidgets.js"></script>
<script src="../../site_libs/plotly-binding-4.10.1/plotly.js"></script>
<script src="../../site_libs/typedarray-0.1/typedarray.min.js"></script>
<script src="../../site_libs/jquery-3.5.1/jquery.min.js"></script>
<link href="../../site_libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">
<script src="../../site_libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
<link href="../../site_libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="../../site_libs/plotly-main-2.11.1/plotly-latest.min.js"></script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Tomas Kristijonas Uždavinys</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../portfolio.html">
 <span class="menu-text">Portfolio</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../blog.html">
 <span class="menu-text">Blog</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <div class="quarto-title-block"><div><h1 class="title">Exports in Lithuania</h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">View Source</a></li></ul></div></div>
                                <div class="quarto-categories">
                <div class="quarto-category">R</div>
                <div class="quarto-category">Macro Economy</div>
                <div class="quarto-category">Coursera</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Tomas Kristijonas Uždavinys </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">March 11, 2023</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<p>Hello and welcome to my first blog post on Quarto! As a part of my Google Data Analytics specialization course capstone project, I have created this blog. In this post, I will be exploring the changes in historical exports and imports of Lithuania over time, using the 6-step framework presented in the course. I hope you enjoy reading about my findings and analysis. Let’s begin!</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="analytics_framework.png" class="img-fluid figure-img" width="767"></p>
<p></p><figcaption class="figure-caption">Google Data Analytics framework</figcaption><p></p>
</figure>
</div>
<section id="ask" class="level2">
<h2 class="anchored" data-anchor-id="ask">Ask</h2>
<p>Before diving into data processing and visualization, it’s essential to take note of the following key events: the Covid-19 pandemic since spring 2020, the strained relationship between China and Lithuania due to the Taiwan question, and the Russian invasion of Ukraine in 2022.</p>
<p>The Covid-19 pandemic has brought unprecedented changes to the global economy, and Lithuania was no exception. The outbreak caused major disruptions in global trade, resulting in a decline in demand for Lithuanian goods and services. On the other hand, Lithuania’s relationship with China has been deteriorating due to the Taiwan question. This has led to a decrease in exports to China, one of Lithuania’s top trading partners.</p>
<p>The Russian invasion of Ukraine in 2022 has also had a significant impact on Lithuania’s trade patterns. The conflict has resulted in the imposition of economic sanctions on Russia, affecting Lithuania’s trade with its Eastern neighbor. The situation is still developing, and it will be interesting to see how Lithuania’s trade with Russia evolves in the coming years.</p>
</section>
<section id="prepare" class="level2">
<h2 class="anchored" data-anchor-id="prepare">Prepare</h2>
<p>The data was downloaded from the Lithuanian National <a href="https://www.lb.lt/en/export-and-import-of-services-by-country">website</a> in an Excel file format. You can also find the same file in my blog’s Github <a href="https://github.com/TK-Problem/personal-website/tree/main/posts/google-analytics-capstone">repo</a>. It was then loaded into the R environment using the <code>tidyverse</code> library and converted to <code>data.table</code> format.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># load libraries</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(data.table)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(kableExtra)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(plotly)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(zoo)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="co"># read data from excel</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>dt <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">"lb_data.xlsx"</span>, <span class="at">sheet =</span> <span class="dv">1</span>, <span class="at">range =</span> <span class="st">"A13:AN201"</span>)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="co"># convert to data.table object</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>dt <span class="ot">&lt;-</span> <span class="fu">data.table</span>(dt)</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="co"># rename columns for convinience</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="fu">setnames</span>(dt, <span class="fu">c</span>(<span class="st">"...1"</span>), <span class="st">"Type"</span>)</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="co"># shift columns to get correct names</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>dt[, Country <span class="sc">:</span><span class="er">=</span> <span class="fu">rep</span>(dt[<span class="fu">seq</span>(<span class="dv">1</span>, <span class="fu">nrow</span>(dt), <span class="dv">4</span>), Type], <span class="at">each =</span> <span class="dv">4</span>)]</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>dt <span class="ot">&lt;-</span> dt[<span class="sc">!</span>(<span class="fu">seq</span>(<span class="dv">1</span>, <span class="fu">nrow</span>(dt), <span class="dv">4</span>))]</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a><span class="co"># generate table with first few rows and columns</span></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a><span class="fu">kbl</span>(dt[<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>, <span class="fu">c</span>(<span class="dv">41</span>, <span class="dv">1</span>, <span class="dv">38</span>, <span class="dv">39</span>, <span class="dv">40</span>)]) <span class="sc">%&gt;%</span></span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>(<span class="at">bootstrap_options =</span> <span class="fu">c</span>(<span class="st">"striped"</span>, <span class="st">"hover"</span>, <span class="st">"condensed"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<table class="table table-striped table-hover table-condensed" style="margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:left;"> Country </th>
   <th style="text-align:left;"> Type </th>
   <th style="text-align:right;"> Q1/2022 </th>
   <th style="text-align:right;"> Q2/2022 </th>
   <th style="text-align:right;"> Q3/2022 </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> Total </td>
   <td style="text-align:left;"> Exports </td>
   <td style="text-align:right;"> 3666.97 </td>
   <td style="text-align:right;"> 4230.51 </td>
   <td style="text-align:right;"> 4615.79 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Total </td>
   <td style="text-align:left;"> Imports </td>
   <td style="text-align:right;"> 2417.61 </td>
   <td style="text-align:right;"> 2585.59 </td>
   <td style="text-align:right;"> 2814.54 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Total </td>
   <td style="text-align:left;"> Balance </td>
   <td style="text-align:right;"> 1249.36 </td>
   <td style="text-align:right;"> 1644.92 </td>
   <td style="text-align:right;"> 1801.25 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> European Union (27 countries) </td>
   <td style="text-align:left;"> Exports </td>
   <td style="text-align:right;"> 2712.50 </td>
   <td style="text-align:right;"> 3182.83 </td>
   <td style="text-align:right;"> 3343.46 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> European Union (27 countries) </td>
   <td style="text-align:left;"> Imports </td>
   <td style="text-align:right;"> 1646.39 </td>
   <td style="text-align:right;"> 1887.25 </td>
   <td style="text-align:right;"> 2026.76 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> European Union (27 countries) </td>
   <td style="text-align:left;"> Balance </td>
   <td style="text-align:right;"> 1066.11 </td>
   <td style="text-align:right;"> 1295.58 </td>
   <td style="text-align:right;"> 1316.70 </td>
  </tr>
</tbody>
</table>

</div>
</div>
<p>In the table above, you can see the total exports and imports of all countries, as well as those of the European Union’s (27 countries) for the three most recent quarters. Even before data cleaning and preparation, a visual analysis shows that a majority of exports and imports go to EU countries. Data is available about 41 unique countries.</p>
</section>
<section id="process" class="level2">
<h2 class="anchored" data-anchor-id="process">Process</h2>
<p>For this project, we didn’t need to do much data cleaning or processing since there were no missing values or unknown formats. However, we did make some minor formatting adjustments in the <code>Prepare</code> section. To keep things simple, I decided not to split this section into different parts.</p>
</section>
<section id="analyze" class="level2">
<h2 class="anchored" data-anchor-id="analyze">Analyze</h2>
<p>After formatting and sorting the data, I investigated export changes of top 10 largest export destinations in 2003 Q3. Exports across European countries saw a substantial increase, with some countries experiencing growth rates of between 200-700%, exports to Belarus and Russia dropped significantly by 60% and 50%, respectively.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># select exports data and exclude aggregated entires</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>agg <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Total"</span>, <span class="st">"European Union (27 countries)"</span>, <span class="st">"Euro Area (18 countries)"</span>, <span class="st">"Commonwealth of Independent States"</span>, <span class="st">"Offshore financial centers"</span>, <span class="st">"Other countries"</span>)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>dt.export <span class="ot">&lt;-</span> <span class="fu">copy</span>(dt[Type <span class="sc">==</span> <span class="st">"Exports"</span> <span class="sc">&amp;</span> <span class="sc">!</span>Country <span class="sc">%in%</span> agg])</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>dt.export[, <span class="st">`</span><span class="at">Change, %</span><span class="st">`</span> <span class="sc">:</span><span class="er">=</span> <span class="fu">round</span>((<span class="st">`</span><span class="at">Q3/2022</span><span class="st">`</span> <span class="sc">/</span> <span class="st">`</span><span class="at">Q3/2013</span><span class="st">`</span> <span class="sc">-</span> <span class="dv">1</span>) <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">1</span>)]</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="co"># get top 10 starting and last period countries by export</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>start <span class="ot">&lt;-</span> <span class="fu">tail</span>(dt.export[, <span class="fu">c</span>(<span class="dv">41</span>, <span class="dv">4</span>, <span class="dv">40</span>)][<span class="fu">order</span>(<span class="st">`</span><span class="at">Q3/2013</span><span class="st">`</span>)], <span class="dv">10</span>)</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="co"># generate kable table</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="fu">kbl</span>(start, <span class="at">caption =</span> <span class="st">"Top 10 largest export destinations in 2013 Q3"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>(<span class="at">bootstrap_options =</span> <span class="fu">c</span>(<span class="st">"striped"</span>, <span class="st">"hover"</span>, <span class="st">"condensed"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<table class="table table-striped table-hover table-condensed" style="margin-left: auto; margin-right: auto;">
<caption>Top 10 largest export destinations in 2013 Q3</caption>
 <thead>
  <tr>
   <th style="text-align:left;"> Country </th>
   <th style="text-align:right;"> Q3/2013 </th>
   <th style="text-align:right;"> Q3/2022 </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> United Kingdom </td>
   <td style="text-align:right;"> 44.43 </td>
   <td style="text-align:right;"> 261.90 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Netherlands </td>
   <td style="text-align:right;"> 44.60 </td>
   <td style="text-align:right;"> 313.90 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Norway </td>
   <td style="text-align:right;"> 46.59 </td>
   <td style="text-align:right;"> 115.63 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> France </td>
   <td style="text-align:right;"> 47.51 </td>
   <td style="text-align:right;"> 380.13 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Denmark </td>
   <td style="text-align:right;"> 61.80 </td>
   <td style="text-align:right;"> 214.14 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Latvia </td>
   <td style="text-align:right;"> 78.22 </td>
   <td style="text-align:right;"> 181.07 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Poland </td>
   <td style="text-align:right;"> 80.27 </td>
   <td style="text-align:right;"> 209.38 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Belarus </td>
   <td style="text-align:right;"> 120.38 </td>
   <td style="text-align:right;"> 45.89 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Germany </td>
   <td style="text-align:right;"> 148.49 </td>
   <td style="text-align:right;"> 637.61 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Russia </td>
   <td style="text-align:right;"> 323.90 </td>
   <td style="text-align:right;"> 154.09 </td>
  </tr>
</tbody>
</table>

</div>
</div>
<p>I found it interesting to observe that out of the 41 countries with known data, there were export reductions in only four countries: Egypt, Russia, Belarus, and Japan. Furthermore, I noticed that the largest export changes were seen in countries with relatively small exports in 2003 Q3, such as Croatia and Malta, whose exports increased 40 times. It’s worth noting that Canada, a large economy, also saw a significant increase in exports, which grew almost 30 times.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># get top 10 starting and last period countries by export</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>top_change <span class="ot">&lt;-</span> <span class="fu">tail</span>(dt.export[, <span class="fu">c</span>(<span class="dv">41</span>, <span class="dv">4</span>, <span class="dv">40</span>, <span class="dv">42</span>)][<span class="fu">order</span>(<span class="st">`</span><span class="at">Change, %</span><span class="st">`</span>)], <span class="dv">5</span>)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>low_change <span class="ot">&lt;-</span> <span class="fu">head</span>(dt.export[, <span class="fu">c</span>(<span class="dv">41</span>, <span class="dv">4</span>, <span class="dv">40</span>, <span class="dv">42</span>)][<span class="fu">order</span>(<span class="st">`</span><span class="at">Change, %</span><span class="st">`</span>)], <span class="dv">5</span>)</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="co"># get changes</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>dt.changes <span class="ot">&lt;-</span> <span class="fu">rbind</span>(low_change, top_change)</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="co"># generate kable table</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="fu">kbl</span>(dt.changes, <span class="at">caption =</span> <span class="st">"Top 5 largest positive and negative export changes"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>(<span class="at">bootstrap_options =</span> <span class="fu">c</span>(<span class="st">"striped"</span>, <span class="st">"hover"</span>, <span class="st">"condensed"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<table class="table table-striped table-hover table-condensed" style="margin-left: auto; margin-right: auto;">
<caption>Top 5 largest positive and negative export changes</caption>
 <thead>
  <tr>
   <th style="text-align:left;"> Country </th>
   <th style="text-align:right;"> Q3/2013 </th>
   <th style="text-align:right;"> Q3/2022 </th>
   <th style="text-align:right;"> Change, % </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> Egypt </td>
   <td style="text-align:right;"> 4.65 </td>
   <td style="text-align:right;"> 0.94 </td>
   <td style="text-align:right;"> -79.8 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Belarus </td>
   <td style="text-align:right;"> 120.38 </td>
   <td style="text-align:right;"> 45.89 </td>
   <td style="text-align:right;"> -61.9 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Russia </td>
   <td style="text-align:right;"> 323.90 </td>
   <td style="text-align:right;"> 154.09 </td>
   <td style="text-align:right;"> -52.4 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Japan </td>
   <td style="text-align:right;"> 1.64 </td>
   <td style="text-align:right;"> 1.21 </td>
   <td style="text-align:right;"> -26.2 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> India </td>
   <td style="text-align:right;"> 2.52 </td>
   <td style="text-align:right;"> 3.03 </td>
   <td style="text-align:right;"> 20.2 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Bulgaria </td>
   <td style="text-align:right;"> 0.76 </td>
   <td style="text-align:right;"> 13.92 </td>
   <td style="text-align:right;"> 1731.6 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Canada </td>
   <td style="text-align:right;"> 0.38 </td>
   <td style="text-align:right;"> 11.62 </td>
   <td style="text-align:right;"> 2957.9 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Romania </td>
   <td style="text-align:right;"> 0.70 </td>
   <td style="text-align:right;"> 27.03 </td>
   <td style="text-align:right;"> 3761.4 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Malta </td>
   <td style="text-align:right;"> 0.50 </td>
   <td style="text-align:right;"> 21.17 </td>
   <td style="text-align:right;"> 4134.0 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Croatia </td>
   <td style="text-align:right;"> 0.11 </td>
   <td style="text-align:right;"> 5.39 </td>
   <td style="text-align:right;"> 4800.0 </td>
  </tr>
</tbody>
</table>

</div>
</div>
<p>Regarding imports, I observed that imports were reduced to only three countries: Finland, Belarus, and Russia. It is worth noting that imports from Japan increased by 80%, which is in contrast to the reduced exports by 26%. Lastly, I observed that imports from Portugal increased by 35 times.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># select exports data and exclude aggregated entires</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>agg <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Total"</span>, <span class="st">"European Union (27 countries)"</span>, <span class="st">"Euro Area (18 countries)"</span>, <span class="st">"Commonwealth of Independent States"</span>, <span class="st">"Offshore financial centers"</span>, <span class="st">"Other countries"</span>)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>dt.import <span class="ot">&lt;-</span> <span class="fu">copy</span>(dt[Type <span class="sc">==</span> <span class="st">"Imports"</span> <span class="sc">&amp;</span> <span class="sc">!</span>Country <span class="sc">%in%</span> agg])</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>dt.import[, <span class="st">`</span><span class="at">Change, %</span><span class="st">`</span> <span class="sc">:</span><span class="er">=</span> <span class="fu">round</span>((<span class="st">`</span><span class="at">Q3/2022</span><span class="st">`</span> <span class="sc">/</span> <span class="st">`</span><span class="at">Q3/2013</span><span class="st">`</span> <span class="sc">-</span> <span class="dv">1</span>) <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">1</span>)]</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="co"># get top 10 starting and last period countries by export</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>top_change <span class="ot">&lt;-</span> <span class="fu">tail</span>(dt.import[, <span class="fu">c</span>(<span class="dv">41</span>, <span class="dv">4</span>, <span class="dv">40</span>, <span class="dv">42</span>)][<span class="fu">order</span>(<span class="st">`</span><span class="at">Change, %</span><span class="st">`</span>)], <span class="dv">5</span>)</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>low_change <span class="ot">&lt;-</span> <span class="fu">head</span>(dt.import[, <span class="fu">c</span>(<span class="dv">41</span>, <span class="dv">4</span>, <span class="dv">40</span>, <span class="dv">42</span>)][<span class="fu">order</span>(<span class="st">`</span><span class="at">Change, %</span><span class="st">`</span>)], <span class="dv">5</span>)</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a><span class="co"># get changes</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>dt.changes <span class="ot">&lt;-</span> <span class="fu">rbind</span>(low_change, top_change)</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a><span class="co"># generate kable table</span></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a><span class="fu">kbl</span>(dt.changes, <span class="at">caption =</span> <span class="st">"Top 5 largest positive and negative import changes"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>(<span class="at">bootstrap_options =</span> <span class="fu">c</span>(<span class="st">"striped"</span>, <span class="st">"hover"</span>, <span class="st">"condensed"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<table class="table table-striped table-hover table-condensed" style="margin-left: auto; margin-right: auto;">
<caption>Top 5 largest positive and negative import changes</caption>
 <thead>
  <tr>
   <th style="text-align:left;"> Country </th>
   <th style="text-align:right;"> Q3/2013 </th>
   <th style="text-align:right;"> Q3/2022 </th>
   <th style="text-align:right;"> Change, % </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> Belarus </td>
   <td style="text-align:right;"> 132.20 </td>
   <td style="text-align:right;"> 35.61 </td>
   <td style="text-align:right;"> -73.1 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Russia </td>
   <td style="text-align:right;"> 121.83 </td>
   <td style="text-align:right;"> 41.64 </td>
   <td style="text-align:right;"> -65.8 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Finland </td>
   <td style="text-align:right;"> 43.22 </td>
   <td style="text-align:right;"> 28.25 </td>
   <td style="text-align:right;"> -34.6 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Denmark </td>
   <td style="text-align:right;"> 38.90 </td>
   <td style="text-align:right;"> 63.68 </td>
   <td style="text-align:right;"> 63.7 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Japan </td>
   <td style="text-align:right;"> 0.72 </td>
   <td style="text-align:right;"> 1.31 </td>
   <td style="text-align:right;"> 81.9 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Germany </td>
   <td style="text-align:right;"> 43.94 </td>
   <td style="text-align:right;"> 252.26 </td>
   <td style="text-align:right;"> 474.1 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Luxembourg </td>
   <td style="text-align:right;"> 1.58 </td>
   <td style="text-align:right;"> 21.70 </td>
   <td style="text-align:right;"> 1273.4 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Hong Kong </td>
   <td style="text-align:right;"> 0.67 </td>
   <td style="text-align:right;"> 9.97 </td>
   <td style="text-align:right;"> 1388.1 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Malta </td>
   <td style="text-align:right;"> 4.60 </td>
   <td style="text-align:right;"> 91.82 </td>
   <td style="text-align:right;"> 1896.1 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Portugal </td>
   <td style="text-align:right;"> 0.59 </td>
   <td style="text-align:right;"> 21.27 </td>
   <td style="text-align:right;"> 3505.1 </td>
  </tr>
</tbody>
</table>

</div>
</div>
<p>Overall, this analysis highlights the importance of careful observation and analysis of data to uncover trends and patterns that can inform strategic decision-making for businesses and policymakers alike.</p>
</section>
<section id="share" class="level2">
<h2 class="anchored" data-anchor-id="share">Share</h2>
<p>Let’s start from visualizing total export and import changes over time.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># select data for plotting</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>dt.plot<span class="fl">.1</span> <span class="ot">&lt;-</span> <span class="fu">melt</span>(dt, <span class="at">id.vars =</span> <span class="fu">c</span>(<span class="st">"Country"</span>, <span class="st">"Type"</span>), <span class="at">variable.name =</span> <span class="st">"Quarter"</span>)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="co"># convert to datetime</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>dt.plot<span class="fl">.1</span>[, Quarter <span class="sc">:</span><span class="er">=</span> <span class="fu">as.Date</span>(<span class="fu">as.yearqtr</span>(Quarter, <span class="at">format =</span> <span class="st">"Q%q/%Y"</span>), <span class="at">frac =</span> <span class="dv">1</span>)]</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="co"># colors for plotting</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>pal <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"#6699ff"</span>, <span class="st">"#ff6666"</span>)</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a><span class="co"># create figure</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>fig <span class="ot">&lt;-</span> <span class="fu">plot_ly</span>(<span class="at">data =</span> dt.plot<span class="fl">.1</span>[Type <span class="sc">!=</span> <span class="st">"Balance"</span> <span class="sc">&amp;</span> Country <span class="sc">==</span> <span class="st">'Total'</span>],</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>               <span class="at">type =</span> <span class="st">'scatter'</span>, <span class="at">mode =</span> <span class="st">'lines+markers'</span>,</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>               <span class="at">x =</span> <span class="sc">~</span>Quarter, <span class="at">y =</span> <span class="sc">~</span>value, <span class="at">color =</span> <span class="sc">~</span>Type, <span class="at">colors =</span> pal)</span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a><span class="co"># update layout</span></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>fig <span class="ot">&lt;-</span> fig <span class="sc">%&gt;%</span> <span class="fu">layout</span>(<span class="at">title =</span> <span class="st">"Total import and export volumes over time"</span>,</span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>                      <span class="at">xaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">"Date"</span>),</span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>                      <span class="at">yaxis =</span> <span class="fu">list</span> (<span class="at">title =</span> <span class="st">"Volumne, M EUR"</span>))</span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>fig</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-3ec14c7d1dcda0d4cdc4" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-3ec14c7d1dcda0d4cdc4">{"x":{"visdat":{"59cc32e3265b":["function () ","plotlyVisDat"]},"cur_data":"59cc32e3265b","attrs":{"59cc32e3265b":{"mode":"lines+markers","x":{},"y":{},"color":{},"colors":["#6699ff","#ff6666"],"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"Total import and export volumes over time","xaxis":{"domain":[0,1],"automargin":true,"title":"Date"},"yaxis":{"domain":[0,1],"automargin":true,"title":"Volumne, M EUR"},"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"mode":"lines+markers","x":["2013-03-31","2013-06-30","2013-09-30","2013-12-31","2014-03-31","2014-06-30","2014-09-30","2014-12-31","2015-03-31","2015-06-30","2015-09-30","2015-12-31","2016-03-31","2016-06-30","2016-09-30","2016-12-31","2017-03-31","2017-06-30","2017-09-30","2017-12-31","2018-03-31","2018-06-30","2018-09-30","2018-12-31","2019-03-31","2019-06-30","2019-09-30","2019-12-31","2020-03-31","2020-06-30","2020-09-30","2020-12-31","2021-03-31","2021-06-30","2021-09-30","2021-12-31","2022-03-31","2022-06-30","2022-09-30"],"y":[1147.25,1413.83,1425.29,1451.19,1292.61,1543.3,1555.26,1492.57,1304.13,1552.3,1620.58,1553.42,1449.65,1783.13,1789.45,1792.19,1773.14,2139.07,2205.41,2232.31,2055.09,2442.75,2616.92,2563.53,2547.45,3039.41,3124.19,3153.37,2847.65,2411.22,2727.27,2934.74,2954.52,3370.53,3448.04,3798.3,3666.97,4230.51,4615.79],"type":"scatter","name":"Exports","marker":{"color":"rgba(102,153,255,1)","line":{"color":"rgba(102,153,255,1)"}},"textfont":{"color":"rgba(102,153,255,1)"},"error_y":{"color":"rgba(102,153,255,1)"},"error_x":{"color":"rgba(102,153,255,1)"},"line":{"color":"rgba(102,153,255,1)"},"xaxis":"x","yaxis":"y","frame":null},{"mode":"lines+markers","x":["2013-03-31","2013-06-30","2013-09-30","2013-12-31","2014-03-31","2014-06-30","2014-09-30","2014-12-31","2015-03-31","2015-06-30","2015-09-30","2015-12-31","2016-03-31","2016-06-30","2016-09-30","2016-12-31","2017-03-31","2017-06-30","2017-09-30","2017-12-31","2018-03-31","2018-06-30","2018-09-30","2018-12-31","2019-03-31","2019-06-30","2019-09-30","2019-12-31","2020-03-31","2020-06-30","2020-09-30","2020-12-31","2021-03-31","2021-06-30","2021-09-30","2021-12-31","2022-03-31","2022-06-30","2022-09-30"],"y":[896.54,940.78,1025.22,1076.8,924.37,1070.31,1099.92,1081.68,954.78,1099.24,1138.96,1079.85,1011.37,1193.6,1214.25,1223.48,1166.15,1365.22,1342.32,1447.18,1314.72,1511.19,1610.99,1568.13,1523.66,1763.23,1801.68,1825.71,1622.68,1241.71,1442.2,1579.57,1573.28,1942.01,2144.96,2476.87,2417.61,2585.59,2814.54],"type":"scatter","name":"Imports","marker":{"color":"rgba(255,102,102,1)","line":{"color":"rgba(255,102,102,1)"}},"textfont":{"color":"rgba(255,102,102,1)"},"error_y":{"color":"rgba(255,102,102,1)"},"error_x":{"color":"rgba(255,102,102,1)"},"line":{"color":"rgba(255,102,102,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>There has been a significant increase in both total imports and exports, with a four-fold increase in imports and a three-fold increase in exports. However, during the first three quarters of 2020, there was a marked decline in both exports and imports, which can be attributed to the impact of Covid-19.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># select data for plotting</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>dt.plot<span class="fl">.2</span> <span class="ot">&lt;-</span> <span class="fu">copy</span>(dt.plot<span class="fl">.1</span>[Country <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Total"</span>, <span class="st">"European Union (27 countries)"</span>, <span class="st">"Russia"</span>, <span class="st">"China"</span>)])</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="co"># reshape table</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>dt.plot<span class="fl">.2</span> <span class="ot">&lt;-</span> <span class="fu">dcast</span>(dt.plot<span class="fl">.2</span>, Quarter<span class="sc">+</span>Type<span class="sc">~</span>Country, <span class="at">value.var =</span> <span class="st">"value"</span>)</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="co"># calculate share to Total values</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>dt.plot<span class="fl">.2</span>[, <span class="st">`</span><span class="at">EU (27 countries) share, %</span><span class="st">`</span> <span class="sc">:</span><span class="er">=</span> <span class="fu">round</span>(<span class="st">`</span><span class="at">European Union (27 countries)</span><span class="st">`</span> <span class="sc">/</span> Total <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">2</span>)]</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>dt.plot<span class="fl">.2</span>[, <span class="st">`</span><span class="at">Russia share, %</span><span class="st">`</span> <span class="sc">:</span><span class="er">=</span> <span class="fu">round</span>(<span class="st">`</span><span class="at">Russia</span><span class="st">`</span> <span class="sc">/</span> Total <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">2</span>)]</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>dt.plot<span class="fl">.2</span>[, <span class="st">`</span><span class="at">China share, %</span><span class="st">`</span> <span class="sc">:</span><span class="er">=</span> <span class="fu">round</span>(<span class="st">`</span><span class="at">China</span><span class="st">`</span> <span class="sc">/</span> Total <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">2</span>)]</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a><span class="co"># colors</span></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>eu.color <span class="ot">&lt;-</span> <span class="st">'rgb(22, 96, 167)'</span></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>ru.color <span class="ot">&lt;-</span> <span class="st">'rgb(205, 12, 24)'</span></span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>ch.color <span class="ot">&lt;-</span> <span class="st">'rgb(0, 128, 0)'</span></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a><span class="co"># create figure (imports)</span></span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>fig <span class="ot">&lt;-</span> <span class="fu">plot_ly</span>(dt.plot<span class="fl">.2</span>[Type <span class="sc">==</span> <span class="st">'Imports'</span>],</span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>               <span class="at">x =</span> <span class="sc">~</span>Quarter, <span class="at">y =</span> <span class="sc">~</span><span class="st">`</span><span class="at">EU (27 countries) share, %</span><span class="st">`</span>,</span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>               <span class="at">name =</span> <span class="st">'EU (27 countries) imports'</span>, <span class="at">type =</span> <span class="st">'scatter'</span>, <span class="at">mode =</span> <span class="st">'lines'</span>,</span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a>               <span class="at">line =</span> <span class="fu">list</span>(<span class="at">color =</span> eu.color, <span class="at">width =</span> <span class="dv">4</span>))</span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a>fig <span class="ot">&lt;-</span> fig <span class="sc">%&gt;%</span> <span class="fu">add_trace</span>(<span class="at">y =</span> <span class="sc">~</span><span class="st">`</span><span class="at">Russia share, %</span><span class="st">`</span>,</span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a>                         <span class="at">name =</span> <span class="st">'Russia imports'</span>,</span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a>                         <span class="at">line =</span> <span class="fu">list</span>(<span class="at">color =</span> ru.color, <span class="at">width =</span> <span class="dv">4</span>))</span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a>fig <span class="ot">&lt;-</span> fig <span class="sc">%&gt;%</span> <span class="fu">add_trace</span>(<span class="at">y =</span> <span class="sc">~</span><span class="st">`</span><span class="at">China share, %</span><span class="st">`</span>,</span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a>                         <span class="at">name =</span> <span class="st">'China imports'</span>,</span>
<span id="cb6-27"><a href="#cb6-27" aria-hidden="true" tabindex="-1"></a>                         <span class="at">line =</span> <span class="fu">list</span>(<span class="at">color =</span> ch.color, <span class="at">width =</span> <span class="dv">4</span>))</span>
<span id="cb6-28"><a href="#cb6-28" aria-hidden="true" tabindex="-1"></a><span class="co"># add exports</span></span>
<span id="cb6-29"><a href="#cb6-29" aria-hidden="true" tabindex="-1"></a>fig <span class="ot">&lt;-</span> fig <span class="sc">%&gt;%</span> <span class="fu">add_trace</span>(<span class="at">x =</span> dt.plot<span class="fl">.2</span>[Type <span class="sc">==</span> <span class="st">'Exports'</span>]<span class="sc">$</span>Quarter,</span>
<span id="cb6-30"><a href="#cb6-30" aria-hidden="true" tabindex="-1"></a>                         <span class="at">y =</span> dt.plot<span class="fl">.2</span>[Type <span class="sc">==</span> <span class="st">'Exports'</span>]<span class="sc">$</span><span class="st">`</span><span class="at">EU (27 countries) share, %</span><span class="st">`</span>,</span>
<span id="cb6-31"><a href="#cb6-31" aria-hidden="true" tabindex="-1"></a>                         <span class="at">name =</span> <span class="st">'EU (27 countries) exports'</span>,</span>
<span id="cb6-32"><a href="#cb6-32" aria-hidden="true" tabindex="-1"></a>                         <span class="at">line =</span> <span class="fu">list</span>(<span class="at">color =</span> eu.color, <span class="at">width =</span> <span class="dv">4</span>, <span class="at">dash =</span> <span class="st">'dash'</span>))</span>
<span id="cb6-33"><a href="#cb6-33" aria-hidden="true" tabindex="-1"></a>fig <span class="ot">&lt;-</span> fig <span class="sc">%&gt;%</span> <span class="fu">add_trace</span>(<span class="at">x =</span> dt.plot<span class="fl">.2</span>[Type <span class="sc">==</span> <span class="st">'Exports'</span>]<span class="sc">$</span>Quarter,</span>
<span id="cb6-34"><a href="#cb6-34" aria-hidden="true" tabindex="-1"></a>                         <span class="at">y =</span> dt.plot<span class="fl">.2</span>[Type <span class="sc">==</span> <span class="st">'Exports'</span>]<span class="sc">$</span><span class="st">`</span><span class="at">Russia share, %</span><span class="st">`</span>,</span>
<span id="cb6-35"><a href="#cb6-35" aria-hidden="true" tabindex="-1"></a>                         <span class="at">name =</span> <span class="st">'Russia exports'</span>,</span>
<span id="cb6-36"><a href="#cb6-36" aria-hidden="true" tabindex="-1"></a>                         <span class="at">line =</span> <span class="fu">list</span>(<span class="at">color =</span> ru.color, <span class="at">width =</span> <span class="dv">4</span>, <span class="at">dash =</span> <span class="st">'dash'</span>))</span>
<span id="cb6-37"><a href="#cb6-37" aria-hidden="true" tabindex="-1"></a>fig <span class="ot">&lt;-</span> fig <span class="sc">%&gt;%</span> <span class="fu">add_trace</span>(<span class="at">x =</span> dt.plot<span class="fl">.2</span>[Type <span class="sc">==</span> <span class="st">'Exports'</span>]<span class="sc">$</span>Quarter,</span>
<span id="cb6-38"><a href="#cb6-38" aria-hidden="true" tabindex="-1"></a>                         <span class="at">y =</span> dt.plot<span class="fl">.2</span>[Type <span class="sc">==</span> <span class="st">'Exports'</span>]<span class="sc">$</span><span class="st">`</span><span class="at">China share, %</span><span class="st">`</span>,</span>
<span id="cb6-39"><a href="#cb6-39" aria-hidden="true" tabindex="-1"></a>                         <span class="at">name =</span> <span class="st">'China exports'</span>,</span>
<span id="cb6-40"><a href="#cb6-40" aria-hidden="true" tabindex="-1"></a>                         <span class="at">line =</span> <span class="fu">list</span>(<span class="at">color =</span> ch.color, <span class="at">width =</span> <span class="dv">4</span>, <span class="at">dash =</span> <span class="st">'dash'</span>))</span>
<span id="cb6-41"><a href="#cb6-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-42"><a href="#cb6-42" aria-hidden="true" tabindex="-1"></a><span class="co"># update layout</span></span>
<span id="cb6-43"><a href="#cb6-43" aria-hidden="true" tabindex="-1"></a>fig <span class="ot">&lt;-</span> fig <span class="sc">%&gt;%</span> <span class="fu">layout</span>(<span class="at">title =</span> <span class="st">"Total import and export volumes over time"</span>,</span>
<span id="cb6-44"><a href="#cb6-44" aria-hidden="true" tabindex="-1"></a>                      <span class="at">xaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">"Date"</span>),</span>
<span id="cb6-45"><a href="#cb6-45" aria-hidden="true" tabindex="-1"></a>                      <span class="at">yaxis =</span> <span class="fu">list</span> (<span class="at">title =</span> <span class="st">"Share to total, %"</span>))</span>
<span id="cb6-46"><a href="#cb6-46" aria-hidden="true" tabindex="-1"></a>fig</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-62da5f4985d6fef3e854" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-62da5f4985d6fef3e854">{"x":{"visdat":{"59cc500e2b1e":["function () ","plotlyVisDat"]},"cur_data":"59cc500e2b1e","attrs":{"59cc500e2b1e":{"x":{},"y":{},"mode":"lines","line":{"color":"rgb(22, 96, 167)","width":4},"name":"EU (27 countries) imports","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"},"59cc500e2b1e.1":{"x":{},"y":{},"mode":"lines","line":{"color":"rgb(205, 12, 24)","width":4},"name":"Russia imports","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter","inherit":true},"59cc500e2b1e.2":{"x":{},"y":{},"mode":"lines","line":{"color":"rgb(0, 128, 0)","width":4},"name":"China imports","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter","inherit":true},"59cc500e2b1e.3":{"x":["2013-03-31","2013-06-30","2013-09-30","2013-12-31","2014-03-31","2014-06-30","2014-09-30","2014-12-31","2015-03-31","2015-06-30","2015-09-30","2015-12-31","2016-03-31","2016-06-30","2016-09-30","2016-12-31","2017-03-31","2017-06-30","2017-09-30","2017-12-31","2018-03-31","2018-06-30","2018-09-30","2018-12-31","2019-03-31","2019-06-30","2019-09-30","2019-12-31","2020-03-31","2020-06-30","2020-09-30","2020-12-31","2021-03-31","2021-06-30","2021-09-30","2021-12-31","2022-03-31","2022-06-30","2022-09-30"],"y":[48.54,52.19,51.13,50.53,49.12,51.48,51.79,50.55,55.09,58.65,58.34,58.33,57.65,59.36,56.7,58.34,60,60.66,59.47,61.29,62.67,63.85,64.19,65.57,65.58,65.58,65.45,66.41,68,68.29,69.66,69.98,71.58,71.4,71.62,70.89,73.97,75.24,72.44],"mode":"lines","line":{"color":"rgb(22, 96, 167)","width":4,"dash":"dash"},"name":"EU (27 countries) exports","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter","inherit":true},"59cc500e2b1e.4":{"x":["2013-03-31","2013-06-30","2013-09-30","2013-12-31","2014-03-31","2014-06-30","2014-09-30","2014-12-31","2015-03-31","2015-06-30","2015-09-30","2015-12-31","2016-03-31","2016-06-30","2016-09-30","2016-12-31","2017-03-31","2017-06-30","2017-09-30","2017-12-31","2018-03-31","2018-06-30","2018-09-30","2018-12-31","2019-03-31","2019-06-30","2019-09-30","2019-12-31","2020-03-31","2020-06-30","2020-09-30","2020-12-31","2021-03-31","2021-06-30","2021-09-30","2021-12-31","2022-03-31","2022-06-30","2022-09-30"],"y":[22.83,22.65,22.73,22.99,22.6,20.24,20.41,19.17,14.56,13,14.26,13.17,12.74,12.06,13.18,11.81,11.2,12.07,12.7,12.52,10.91,10.77,10.41,9.5,9.26,8.66,8.56,8.96,8.13,6.67,6.56,6.67,5.35,5.82,5.61,6.32,5.08,3.38,3.34],"mode":"lines","line":{"color":"rgb(205, 12, 24)","width":4,"dash":"dash"},"name":"Russia exports","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter","inherit":true},"59cc500e2b1e.5":{"x":["2013-03-31","2013-06-30","2013-09-30","2013-12-31","2014-03-31","2014-06-30","2014-09-30","2014-12-31","2015-03-31","2015-06-30","2015-09-30","2015-12-31","2016-03-31","2016-06-30","2016-09-30","2016-12-31","2017-03-31","2017-06-30","2017-09-30","2017-12-31","2018-03-31","2018-06-30","2018-09-30","2018-12-31","2019-03-31","2019-06-30","2019-09-30","2019-12-31","2020-03-31","2020-06-30","2020-09-30","2020-12-31","2021-03-31","2021-06-30","2021-09-30","2021-12-31","2022-03-31","2022-06-30","2022-09-30"],"y":[0.23,0.18,0.25,0.2,0.61,0.43,0.53,0.78,1,0.6,0.36,0.4,0.21,0.33,0.19,0.21,0.23,0.19,0.27,0.26,0.19,0.22,0.2,0.34,0.3,0.35,0.28,0.47,0.27,0.55,0.47,0.4,0.34,0.25,0.35,0.44,0.29,0.19,0.21],"mode":"lines","line":{"color":"rgb(0, 128, 0)","width":4,"dash":"dash"},"name":"China exports","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter","inherit":true}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"Total import and export volumes over time","xaxis":{"domain":[0,1],"automargin":true,"title":"Date"},"yaxis":{"domain":[0,1],"automargin":true,"title":"Share to total, %"},"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":["2013-03-31","2013-06-30","2013-09-30","2013-12-31","2014-03-31","2014-06-30","2014-09-30","2014-12-31","2015-03-31","2015-06-30","2015-09-30","2015-12-31","2016-03-31","2016-06-30","2016-09-30","2016-12-31","2017-03-31","2017-06-30","2017-09-30","2017-12-31","2018-03-31","2018-06-30","2018-09-30","2018-12-31","2019-03-31","2019-06-30","2019-09-30","2019-12-31","2020-03-31","2020-06-30","2020-09-30","2020-12-31","2021-03-31","2021-06-30","2021-09-30","2021-12-31","2022-03-31","2022-06-30","2022-09-30"],"y":[53.81,55.17,55.92,54.31,49.39,51.39,50.6,52.64,54.26,55.4,57.83,55.06,57.05,57.91,58.13,59.54,57.49,59.95,58.93,60.09,59.28,60.06,59.24,58.68,61.03,61.42,60.21,60.54,62.38,65.28,65.62,62.17,64.53,66.17,66.58,62.36,68.1,72.99,72.01],"mode":"lines","line":{"color":"rgb(22, 96, 167)","width":4},"name":"EU (27 countries) imports","type":"scatter","marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["2013-03-31","2013-06-30","2013-09-30","2013-12-31","2014-03-31","2014-06-30","2014-09-30","2014-12-31","2015-03-31","2015-06-30","2015-09-30","2015-12-31","2016-03-31","2016-06-30","2016-09-30","2016-12-31","2017-03-31","2017-06-30","2017-09-30","2017-12-31","2018-03-31","2018-06-30","2018-09-30","2018-12-31","2019-03-31","2019-06-30","2019-09-30","2019-12-31","2020-03-31","2020-06-30","2020-09-30","2020-12-31","2021-03-31","2021-06-30","2021-09-30","2021-12-31","2022-03-31","2022-06-30","2022-09-30"],"y":[14.68,12.38,11.88,14.86,16.74,17.37,17.16,16.39,11.1,9.16,9.67,10.9,9.43,9.07,8.77,8.68,10.16,8.76,8.5,8.72,8.71,8.2,8.76,8.7,8.72,8.36,9.14,7.7,8.35,8.53,8.43,9.45,7.03,6.51,6.44,6.32,6.19,2.89,1.48],"mode":"lines","line":{"color":"rgb(205, 12, 24)","width":4},"name":"Russia imports","type":"scatter","marker":{"color":"rgba(255,127,14,1)","line":{"color":"rgba(255,127,14,1)"}},"error_y":{"color":"rgba(255,127,14,1)"},"error_x":{"color":"rgba(255,127,14,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["2013-03-31","2013-06-30","2013-09-30","2013-12-31","2014-03-31","2014-06-30","2014-09-30","2014-12-31","2015-03-31","2015-06-30","2015-09-30","2015-12-31","2016-03-31","2016-06-30","2016-09-30","2016-12-31","2017-03-31","2017-06-30","2017-09-30","2017-12-31","2018-03-31","2018-06-30","2018-09-30","2018-12-31","2019-03-31","2019-06-30","2019-09-30","2019-12-31","2020-03-31","2020-06-30","2020-09-30","2020-12-31","2021-03-31","2021-06-30","2021-09-30","2021-12-31","2022-03-31","2022-06-30","2022-09-30"],"y":[0.17,0.97,0.96,0.18,0.25,0.17,0.55,0.51,0.93,0.39,0.35,0.24,0.2,0.21,0.4,0.32,0.28,0.29,0.43,0.38,0.38,0.36,0.32,0.36,0.4,0.4,0.42,0.47,0.84,1.58,1.24,1.08,2.15,1.7,2.16,2.15,1.74,0.97,1.1],"mode":"lines","line":{"color":"rgb(0, 128, 0)","width":4},"name":"China imports","type":"scatter","marker":{"color":"rgba(44,160,44,1)","line":{"color":"rgba(44,160,44,1)"}},"error_y":{"color":"rgba(44,160,44,1)"},"error_x":{"color":"rgba(44,160,44,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["2013-03-31","2013-06-30","2013-09-30","2013-12-31","2014-03-31","2014-06-30","2014-09-30","2014-12-31","2015-03-31","2015-06-30","2015-09-30","2015-12-31","2016-03-31","2016-06-30","2016-09-30","2016-12-31","2017-03-31","2017-06-30","2017-09-30","2017-12-31","2018-03-31","2018-06-30","2018-09-30","2018-12-31","2019-03-31","2019-06-30","2019-09-30","2019-12-31","2020-03-31","2020-06-30","2020-09-30","2020-12-31","2021-03-31","2021-06-30","2021-09-30","2021-12-31","2022-03-31","2022-06-30","2022-09-30"],"y":[48.54,52.19,51.13,50.53,49.12,51.48,51.79,50.55,55.09,58.65,58.34,58.33,57.65,59.36,56.7,58.34,60,60.66,59.47,61.29,62.67,63.85,64.19,65.57,65.58,65.58,65.45,66.41,68,68.29,69.66,69.98,71.58,71.4,71.62,70.89,73.97,75.24,72.44],"mode":"lines","line":{"color":"rgb(22, 96, 167)","width":4,"dash":"dash"},"name":"EU (27 countries) exports","type":"scatter","marker":{"color":"rgba(214,39,40,1)","line":{"color":"rgba(214,39,40,1)"}},"error_y":{"color":"rgba(214,39,40,1)"},"error_x":{"color":"rgba(214,39,40,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["2013-03-31","2013-06-30","2013-09-30","2013-12-31","2014-03-31","2014-06-30","2014-09-30","2014-12-31","2015-03-31","2015-06-30","2015-09-30","2015-12-31","2016-03-31","2016-06-30","2016-09-30","2016-12-31","2017-03-31","2017-06-30","2017-09-30","2017-12-31","2018-03-31","2018-06-30","2018-09-30","2018-12-31","2019-03-31","2019-06-30","2019-09-30","2019-12-31","2020-03-31","2020-06-30","2020-09-30","2020-12-31","2021-03-31","2021-06-30","2021-09-30","2021-12-31","2022-03-31","2022-06-30","2022-09-30"],"y":[22.83,22.65,22.73,22.99,22.6,20.24,20.41,19.17,14.56,13,14.26,13.17,12.74,12.06,13.18,11.81,11.2,12.07,12.7,12.52,10.91,10.77,10.41,9.5,9.26,8.66,8.56,8.96,8.13,6.67,6.56,6.67,5.35,5.82,5.61,6.32,5.08,3.38,3.34],"mode":"lines","line":{"color":"rgb(205, 12, 24)","width":4,"dash":"dash"},"name":"Russia exports","type":"scatter","marker":{"color":"rgba(148,103,189,1)","line":{"color":"rgba(148,103,189,1)"}},"error_y":{"color":"rgba(148,103,189,1)"},"error_x":{"color":"rgba(148,103,189,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["2013-03-31","2013-06-30","2013-09-30","2013-12-31","2014-03-31","2014-06-30","2014-09-30","2014-12-31","2015-03-31","2015-06-30","2015-09-30","2015-12-31","2016-03-31","2016-06-30","2016-09-30","2016-12-31","2017-03-31","2017-06-30","2017-09-30","2017-12-31","2018-03-31","2018-06-30","2018-09-30","2018-12-31","2019-03-31","2019-06-30","2019-09-30","2019-12-31","2020-03-31","2020-06-30","2020-09-30","2020-12-31","2021-03-31","2021-06-30","2021-09-30","2021-12-31","2022-03-31","2022-06-30","2022-09-30"],"y":[0.23,0.18,0.25,0.2,0.61,0.43,0.53,0.78,1,0.6,0.36,0.4,0.21,0.33,0.19,0.21,0.23,0.19,0.27,0.26,0.19,0.22,0.2,0.34,0.3,0.35,0.28,0.47,0.27,0.55,0.47,0.4,0.34,0.25,0.35,0.44,0.29,0.19,0.21],"mode":"lines","line":{"color":"rgb(0, 128, 0)","width":4,"dash":"dash"},"name":"China exports","type":"scatter","marker":{"color":"rgba(140,86,75,1)","line":{"color":"rgba(140,86,75,1)"}},"error_y":{"color":"rgba(140,86,75,1)"},"error_x":{"color":"rgba(140,86,75,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>The European Union has seen a significant increase in the proportion of imports in their total volume, which has increased by 50%. This means that the EU is becoming more reliant on imports and is potentially exporting less to other countries.</p>
<p>When it comes to trade with Russia, both imports and exports have been declining steadily even before the start of the 2022 war. Prior to the war, Lithuania was a net importer with Russian trade. Surprisingly, tensions between China and Lithuania did not have a significant impact on their trade relationship, and the share of total imports from China increased almost 5 times.</p>
<p>Finally let’s analyze how imports and exports were affected with Countries close to Russia.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># countries to select</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>country.list <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Kazakhstan"</span>, <span class="st">"Belarus"</span>, <span class="st">"Russia"</span>, <span class="st">"Turkey"</span>, <span class="st">"Offshore financial centers"</span>)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="co"># select data for plotting</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>dt.plot<span class="fl">.3</span> <span class="ot">&lt;-</span> <span class="fu">copy</span>(dt.plot<span class="fl">.1</span>[Country <span class="sc">%in%</span> country.list])</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="co"># reshape table</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>dt.plot<span class="fl">.3</span> <span class="ot">&lt;-</span> <span class="fu">dcast</span>(dt.plot<span class="fl">.3</span>, Quarter<span class="sc">+</span>Type<span class="sc">~</span>Country, <span class="at">value.var =</span> <span class="st">"value"</span>)</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a><span class="co"># reshape back</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>dt.plot<span class="fl">.3</span> <span class="ot">&lt;-</span> <span class="fu">melt</span>(dt.plot<span class="fl">.3</span>, <span class="at">id.vars =</span> <span class="fu">c</span>(<span class="st">"Quarter"</span>, <span class="st">"Type"</span>), <span class="at">variable.name =</span> <span class="st">"Country"</span>)</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a><span class="co"># create new label</span></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>dt.plot<span class="fl">.3</span>[, label <span class="sc">:</span><span class="er">=</span> <span class="fu">paste</span>(Country, Type)]</span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a><span class="co"># color dictionary</span></span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>color.dict <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"#C5AFA4"</span>, <span class="st">"#CC7E85"</span>, <span class="st">"#CF4D6F"</span>, <span class="st">"#A36D90"</span>, <span class="st">"#76818E"</span>)</span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a><span class="co"># left figure</span></span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a>fig1 <span class="ot">&lt;-</span> <span class="fu">plot_ly</span>(<span class="at">data =</span> dt.plot<span class="fl">.3</span>[Type <span class="sc">==</span> <span class="st">"Imports"</span>],</span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a>                <span class="at">x =</span> <span class="sc">~</span>Quarter, <span class="at">y =</span> <span class="sc">~</span>value, <span class="at">color=</span><span class="sc">~</span>label, <span class="at">colors =</span> color.dict,</span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a>                <span class="at">type =</span> <span class="st">'scatter'</span>, <span class="at">mode =</span> <span class="st">'lines+markers'</span>,</span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a>                <span class="at">marker =</span> <span class="fu">list</span>(<span class="at">line =</span> <span class="fu">list</span>(<span class="at">width =</span> <span class="dv">3</span>)))</span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-25"><a href="#cb7-25" aria-hidden="true" tabindex="-1"></a><span class="co"># right figure</span></span>
<span id="cb7-26"><a href="#cb7-26" aria-hidden="true" tabindex="-1"></a>fig2 <span class="ot">&lt;-</span> <span class="fu">plot_ly</span>(<span class="at">data =</span> dt.plot<span class="fl">.3</span>[Type <span class="sc">==</span> <span class="st">"Exports"</span>],</span>
<span id="cb7-27"><a href="#cb7-27" aria-hidden="true" tabindex="-1"></a>                <span class="at">x =</span> <span class="sc">~</span>Quarter, <span class="at">y =</span> <span class="sc">~</span>value, <span class="at">color=</span><span class="sc">~</span>label,</span>
<span id="cb7-28"><a href="#cb7-28" aria-hidden="true" tabindex="-1"></a>                <span class="at">colors =</span> color.dict,</span>
<span id="cb7-29"><a href="#cb7-29" aria-hidden="true" tabindex="-1"></a>                <span class="at">type =</span> <span class="st">'scatter'</span>, <span class="at">mode =</span> <span class="st">'lines+markers'</span>,</span>
<span id="cb7-30"><a href="#cb7-30" aria-hidden="true" tabindex="-1"></a>                <span class="at">line =</span> <span class="fu">list</span>(<span class="at">dash =</span> <span class="st">'dot'</span>),</span>
<span id="cb7-31"><a href="#cb7-31" aria-hidden="true" tabindex="-1"></a>                <span class="at">marker =</span> <span class="fu">list</span>(<span class="at">line =</span> <span class="fu">list</span>(<span class="at">width =</span> <span class="dv">3</span>)))</span>
<span id="cb7-32"><a href="#cb7-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-33"><a href="#cb7-33" aria-hidden="true" tabindex="-1"></a>fig <span class="ot">&lt;-</span> <span class="fu">subplot</span>(fig1, fig2, <span class="at">nrows =</span> <span class="dv">2</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb7-34"><a href="#cb7-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">layout</span>(<span class="at">title =</span> <span class="st">'Exports and imports with countries close to Russia'</span>)</span>
<span id="cb7-35"><a href="#cb7-35" aria-hidden="true" tabindex="-1"></a>fig</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-3b6748cffcd64fdafab2" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-3b6748cffcd64fdafab2">{"x":{"data":[{"x":["2013-03-31","2013-06-30","2013-09-30","2013-12-31","2014-03-31","2014-06-30","2014-09-30","2014-12-31","2015-03-31","2015-06-30","2015-09-30","2015-12-31","2016-03-31","2016-06-30","2016-09-30","2016-12-31","2017-03-31","2017-06-30","2017-09-30","2017-12-31","2018-03-31","2018-06-30","2018-09-30","2018-12-31","2019-03-31","2019-06-30","2019-09-30","2019-12-31","2020-03-31","2020-06-30","2020-09-30","2020-12-31","2021-03-31","2021-06-30","2021-09-30","2021-12-31","2022-03-31","2022-06-30","2022-09-30"],"y":[115.54,126.63,132.2,131.83,146.83,156.17,154.12,142.08,123.91,140.56,133.98,136.56,115.2,150.38,137.63,124.6,117.42,130.61,136.95,138.49,133.09,158.29,161.65,149.74,154.53,168.8,172.75,189.48,136.04,94.31,119.37,118.24,108.41,122.53,116.48,124.63,102.87,64.74,35.61],"mode":"lines+markers","marker":{"color":"rgba(197,175,164,1)","line":{"color":"rgba(197,175,164,1)","width":3}},"type":"scatter","name":"Belarus Imports","textfont":{"color":"rgba(197,175,164,1)"},"error_y":{"color":"rgba(197,175,164,1)"},"error_x":{"color":"rgba(197,175,164,1)"},"line":{"color":"rgba(197,175,164,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["2013-03-31","2013-06-30","2013-09-30","2013-12-31","2014-03-31","2014-06-30","2014-09-30","2014-12-31","2015-03-31","2015-06-30","2015-09-30","2015-12-31","2016-03-31","2016-06-30","2016-09-30","2016-12-31","2017-03-31","2017-06-30","2017-09-30","2017-12-31","2018-03-31","2018-06-30","2018-09-30","2018-12-31","2019-03-31","2019-06-30","2019-09-30","2019-12-31","2020-03-31","2020-06-30","2020-09-30","2020-12-31","2021-03-31","2021-06-30","2021-09-30","2021-12-31","2022-03-31","2022-06-30","2022-09-30"],"y":[4.11,3.05,3.86,3.5,3.41,5.24,5.71,5.89,2.95,3.84,6.03,6.29,5.18,5,5.62,5.18,4.46,5.02,5.36,5.8,5.25,5.6,5.55,5.24,4.77,4.93,5.29,7.8,5.17,4.66,4.15,4.96,4.92,6.01,7.86,7.29,7.46,8.87,19.22],"mode":"lines+markers","marker":{"color":"rgba(204,126,133,1)","line":{"color":"rgba(204,126,133,1)","width":3}},"type":"scatter","name":"Kazakhstan Imports","textfont":{"color":"rgba(204,126,133,1)"},"error_y":{"color":"rgba(204,126,133,1)"},"error_x":{"color":"rgba(204,126,133,1)"},"line":{"color":"rgba(204,126,133,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["2013-03-31","2013-06-30","2013-09-30","2013-12-31","2014-03-31","2014-06-30","2014-09-30","2014-12-31","2015-03-31","2015-06-30","2015-09-30","2015-12-31","2016-03-31","2016-06-30","2016-09-30","2016-12-31","2017-03-31","2017-06-30","2017-09-30","2017-12-31","2018-03-31","2018-06-30","2018-09-30","2018-12-31","2019-03-31","2019-06-30","2019-09-30","2019-12-31","2020-03-31","2020-06-30","2020-09-30","2020-12-31","2021-03-31","2021-06-30","2021-09-30","2021-12-31","2022-03-31","2022-06-30","2022-09-30"],"y":[44.81,27.89,39.96,52.75,43.01,50.46,46.82,44.94,41.9,61.2,42.98,41.27,29.81,42.42,49.56,45.29,50.07,60.22,59.44,54.68,58.26,47.31,82.88,96.62,62.65,60.58,71.2,73.11,62.65,40.01,47.06,52.63,50.98,66.93,73.78,98.71,109.51,102.79,151.67],"mode":"lines+markers","marker":{"color":"rgba(207,77,111,1)","line":{"color":"rgba(207,77,111,1)","width":3}},"type":"scatter","name":"Offshore financial centers Imports","textfont":{"color":"rgba(207,77,111,1)"},"error_y":{"color":"rgba(207,77,111,1)"},"error_x":{"color":"rgba(207,77,111,1)"},"line":{"color":"rgba(207,77,111,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["2013-03-31","2013-06-30","2013-09-30","2013-12-31","2014-03-31","2014-06-30","2014-09-30","2014-12-31","2015-03-31","2015-06-30","2015-09-30","2015-12-31","2016-03-31","2016-06-30","2016-09-30","2016-12-31","2017-03-31","2017-06-30","2017-09-30","2017-12-31","2018-03-31","2018-06-30","2018-09-30","2018-12-31","2019-03-31","2019-06-30","2019-09-30","2019-12-31","2020-03-31","2020-06-30","2020-09-30","2020-12-31","2021-03-31","2021-06-30","2021-09-30","2021-12-31","2022-03-31","2022-06-30","2022-09-30"],"y":[131.63,116.5,121.83,160.03,154.75,185.93,188.73,177.3,106.02,100.72,110.09,117.68,95.34,108.24,106.55,106.16,118.49,119.61,114.05,126.21,114.49,123.87,141.15,136.37,132.81,147.38,164.76,140.5,135.55,105.95,121.58,149.32,110.59,126.52,138.03,156.62,149.77,74.81,41.64],"mode":"lines+markers","marker":{"color":"rgba(163,109,144,1)","line":{"color":"rgba(163,109,144,1)","width":3}},"type":"scatter","name":"Russia Imports","textfont":{"color":"rgba(163,109,144,1)"},"error_y":{"color":"rgba(163,109,144,1)"},"error_x":{"color":"rgba(163,109,144,1)"},"line":{"color":"rgba(163,109,144,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["2013-03-31","2013-06-30","2013-09-30","2013-12-31","2014-03-31","2014-06-30","2014-09-30","2014-12-31","2015-03-31","2015-06-30","2015-09-30","2015-12-31","2016-03-31","2016-06-30","2016-09-30","2016-12-31","2017-03-31","2017-06-30","2017-09-30","2017-12-31","2018-03-31","2018-06-30","2018-09-30","2018-12-31","2019-03-31","2019-06-30","2019-09-30","2019-12-31","2020-03-31","2020-06-30","2020-09-30","2020-12-31","2021-03-31","2021-06-30","2021-09-30","2021-12-31","2022-03-31","2022-06-30","2022-09-30"],"y":[1.6,16.82,12.29,11.76,2.56,6.7,9.54,4.85,5.04,15.69,17.79,8.18,3.29,17.68,12.17,5.02,2.4,12.25,10.47,6.33,7.34,12.91,20.22,12.72,6.87,26.59,25.41,11.39,5.28,3.98,4.61,3.99,4,12.26,28.71,13.8,15.98,42.1,47.8],"mode":"lines+markers","marker":{"color":"rgba(118,129,142,1)","line":{"color":"rgba(118,129,142,1)","width":3}},"type":"scatter","name":"Turkey Imports","textfont":{"color":"rgba(118,129,142,1)"},"error_y":{"color":"rgba(118,129,142,1)"},"error_x":{"color":"rgba(118,129,142,1)"},"line":{"color":"rgba(118,129,142,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["2013-03-31","2013-06-30","2013-09-30","2013-12-31","2014-03-31","2014-06-30","2014-09-30","2014-12-31","2015-03-31","2015-06-30","2015-09-30","2015-12-31","2016-03-31","2016-06-30","2016-09-30","2016-12-31","2017-03-31","2017-06-30","2017-09-30","2017-12-31","2018-03-31","2018-06-30","2018-09-30","2018-12-31","2019-03-31","2019-06-30","2019-09-30","2019-12-31","2020-03-31","2020-06-30","2020-09-30","2020-12-31","2021-03-31","2021-06-30","2021-09-30","2021-12-31","2022-03-31","2022-06-30","2022-09-30"],"y":[110.87,122.1,120.38,124.12,120.95,150.05,147.71,153.24,123.36,135.89,154.07,137.18,127.59,148.6,156.58,138.02,109.58,151.8,153.31,139.12,144.88,181.9,177.09,162.14,173.17,177.59,177.26,174.03,142.79,104.18,131.16,126.96,108.08,116.27,113.25,123.76,61.85,41.15,45.89],"mode":"lines+markers","line":{"color":"rgba(197,175,164,1)","dash":"dot"},"marker":{"color":"rgba(197,175,164,1)","line":{"color":"rgba(197,175,164,1)","width":3}},"type":"scatter","name":"Belarus Exports","textfont":{"color":"rgba(197,175,164,1)"},"error_y":{"color":"rgba(197,175,164,1)"},"error_x":{"color":"rgba(197,175,164,1)"},"xaxis":"x2","yaxis":"y2","frame":null},{"x":["2013-03-31","2013-06-30","2013-09-30","2013-12-31","2014-03-31","2014-06-30","2014-09-30","2014-12-31","2015-03-31","2015-06-30","2015-09-30","2015-12-31","2016-03-31","2016-06-30","2016-09-30","2016-12-31","2017-03-31","2017-06-30","2017-09-30","2017-12-31","2018-03-31","2018-06-30","2018-09-30","2018-12-31","2019-03-31","2019-06-30","2019-09-30","2019-12-31","2020-03-31","2020-06-30","2020-09-30","2020-12-31","2021-03-31","2021-06-30","2021-09-30","2021-12-31","2022-03-31","2022-06-30","2022-09-30"],"y":[18.63,19.45,17.48,17.01,13.91,18.5,16.64,17.5,13.87,16.78,15.89,15.06,11.45,19.71,16.35,17.05,16.75,19.7,18.54,16.65,15.2,17.4,18.97,21.74,15.21,21.83,19.82,21.05,14.77,12.59,21.37,14.87,13.37,13.89,15.15,17.33,18.05,27.12,36.51],"mode":"lines+markers","line":{"color":"rgba(204,126,133,1)","dash":"dot"},"marker":{"color":"rgba(204,126,133,1)","line":{"color":"rgba(204,126,133,1)","width":3}},"type":"scatter","name":"Kazakhstan Exports","textfont":{"color":"rgba(204,126,133,1)"},"error_y":{"color":"rgba(204,126,133,1)"},"error_x":{"color":"rgba(204,126,133,1)"},"xaxis":"x2","yaxis":"y2","frame":null},{"x":["2013-03-31","2013-06-30","2013-09-30","2013-12-31","2014-03-31","2014-06-30","2014-09-30","2014-12-31","2015-03-31","2015-06-30","2015-09-30","2015-12-31","2016-03-31","2016-06-30","2016-09-30","2016-12-31","2017-03-31","2017-06-30","2017-09-30","2017-12-31","2018-03-31","2018-06-30","2018-09-30","2018-12-31","2019-03-31","2019-06-30","2019-09-30","2019-12-31","2020-03-31","2020-06-30","2020-09-30","2020-12-31","2021-03-31","2021-06-30","2021-09-30","2021-12-31","2022-03-31","2022-06-30","2022-09-30"],"y":[16.97,16.72,13.26,14.64,20.41,23.99,21.3,26.47,23.45,24.08,26.36,24.54,25.6,28.43,27.28,32.89,38.38,39.04,39.87,38.9,33.19,31.11,26.45,38.46,35.93,37.72,36.62,35.93,39.45,39.63,49.15,46.52,61.31,71.69,64.26,70,71.42,64.56,73.96],"mode":"lines+markers","line":{"color":"rgba(207,77,111,1)","dash":"dot"},"marker":{"color":"rgba(207,77,111,1)","line":{"color":"rgba(207,77,111,1)","width":3}},"type":"scatter","name":"Offshore financial centers Exports","textfont":{"color":"rgba(207,77,111,1)"},"error_y":{"color":"rgba(207,77,111,1)"},"error_x":{"color":"rgba(207,77,111,1)"},"xaxis":"x2","yaxis":"y2","frame":null},{"x":["2013-03-31","2013-06-30","2013-09-30","2013-12-31","2014-03-31","2014-06-30","2014-09-30","2014-12-31","2015-03-31","2015-06-30","2015-09-30","2015-12-31","2016-03-31","2016-06-30","2016-09-30","2016-12-31","2017-03-31","2017-06-30","2017-09-30","2017-12-31","2018-03-31","2018-06-30","2018-09-30","2018-12-31","2019-03-31","2019-06-30","2019-09-30","2019-12-31","2020-03-31","2020-06-30","2020-09-30","2020-12-31","2021-03-31","2021-06-30","2021-09-30","2021-12-31","2022-03-31","2022-06-30","2022-09-30"],"y":[261.91,320.21,323.9,333.56,292.07,312.38,317.39,286.14,189.92,201.81,231.04,204.51,184.63,215.09,235.9,211.69,198.54,258.14,280.16,279.58,224.23,263.09,272.35,243.41,235.86,263.31,267.33,282.65,231.63,160.73,178.81,195.77,158.02,196.28,193.4,239.94,186.42,142.92,154.09],"mode":"lines+markers","line":{"color":"rgba(163,109,144,1)","dash":"dot"},"marker":{"color":"rgba(163,109,144,1)","line":{"color":"rgba(163,109,144,1)","width":3}},"type":"scatter","name":"Russia Exports","textfont":{"color":"rgba(163,109,144,1)"},"error_y":{"color":"rgba(163,109,144,1)"},"error_x":{"color":"rgba(163,109,144,1)"},"xaxis":"x2","yaxis":"y2","frame":null},{"x":["2013-03-31","2013-06-30","2013-09-30","2013-12-31","2014-03-31","2014-06-30","2014-09-30","2014-12-31","2015-03-31","2015-06-30","2015-09-30","2015-12-31","2016-03-31","2016-06-30","2016-09-30","2016-12-31","2017-03-31","2017-06-30","2017-09-30","2017-12-31","2018-03-31","2018-06-30","2018-09-30","2018-12-31","2019-03-31","2019-06-30","2019-09-30","2019-12-31","2020-03-31","2020-06-30","2020-09-30","2020-12-31","2021-03-31","2021-06-30","2021-09-30","2021-12-31","2022-03-31","2022-06-30","2022-09-30"],"y":[6.48,5.95,6.41,7.06,3.73,4.18,2.18,1.41,1.5,1.14,1.18,1.73,2.15,1.25,1.48,1.33,2.2,2.71,2.19,2.19,1.82,6.39,20.1,9.36,5.6,31.61,38.69,28.09,4.12,10.37,1.88,2.32,2.46,3.1,6.97,7.44,7.02,29.39,46.79],"mode":"lines+markers","line":{"color":"rgba(118,129,142,1)","dash":"dot"},"marker":{"color":"rgba(118,129,142,1)","line":{"color":"rgba(118,129,142,1)","width":3}},"type":"scatter","name":"Turkey Exports","textfont":{"color":"rgba(118,129,142,1)"},"error_y":{"color":"rgba(118,129,142,1)"},"error_x":{"color":"rgba(118,129,142,1)"},"xaxis":"x2","yaxis":"y2","frame":null}],"layout":{"xaxis":{"domain":[0,1],"automargin":true,"anchor":"y"},"xaxis2":{"domain":[0,1],"automargin":true,"anchor":"y2"},"yaxis2":{"domain":[0,0.48],"automargin":true,"anchor":"x2"},"yaxis":{"domain":[0.52,1],"automargin":true,"anchor":"x"},"annotations":[],"shapes":[],"images":[],"margin":{"b":40,"l":60,"t":25,"r":10},"hovermode":"closest","showlegend":true,"title":"Exports and imports with countries close to Russia"},"attrs":{"59cc699c1174":{"x":{},"y":{},"mode":"lines+markers","marker":{"line":{"width":3}},"color":{},"colors":["#C5AFA4","#CC7E85","#CF4D6F","#A36D90","#76818E"],"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"},"59cc3c223e2a":{"x":{},"y":{},"mode":"lines+markers","line":{"dash":"dot"},"marker":{"line":{"width":3}},"color":{},"colors":["#C5AFA4","#CC7E85","#CF4D6F","#A36D90","#76818E"],"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"}},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"subplot":true,"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>Now, let’s turn our attention to how trade with countries close to Russia has been affected. Since the Russian invasion of Ukraine, imports and exports with Turkey and Kazakhstan have increased 3-5 times. This increase may be attributed to companies trying to circumvent sanctions to Russia through exports to Kazakhstan. It’s interesting to see how companies are adapting to changes in trade relationships and finding new opportunities to continue doing business.</p>
</section>
<section id="act" class="level2">
<h2 class="anchored" data-anchor-id="act">Act</h2>
<p>In conclusion, my analysis offers insights that could be utilized in evaluating the impact of historical events on Lithuania’s imports and exports. Based on the findings, several conclusions can be drawn:</p>
<ul>
<li><p>Firstly, the declines in imports and exports with Russia preceded the 2022 invasion to Ukraine. This finding suggests that the declining trade relationship between the two countries started since 2014 Crimea annexation.</p></li>
<li><p>Secondly, the analysis revealed that political tensions over Taiwan did not have a substantial impact on exports to China.</p></li>
<li><p>Finally, the data indicates that imports and exports to Kazakhstan have increased, potentially due to sanctions against Russia. This finding underscores the importance of considering the geopolitical context when imposing economical sanctions.</p></li>
</ul>
<p>Overall, the present study highlights the complexities of trade relationships between Lithuania and other countries.</p>


<!-- -->

</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb8" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "Exports in Lithuania"</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="an">author:</span><span class="co"> "Tomas Kristijonas Uždavinys"</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="an">format:</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="co">  html:</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a><span class="co">    code-fold: true</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a><span class="co">    code-tools: true</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a><span class="an">date:</span><span class="co"> "2023-03-11"</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a><span class="an">categories:</span><span class="co"> [R, Macro Economy, Coursera]</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>Hello and welcome to my first blog post on Quarto! As a part of my Google Data Analytics specialization course capstone project, I have created this blog. In this post, I will be exploring the changes in historical exports and imports of Lithuania over time, using the 6-step framework presented in the course. I hope you enjoy reading about my findings and analysis. Let's begin!</span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a><span class="al">![Google Data Analytics framework](analytics_framework.png)</span>{width="767"}</span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a><span class="fu">## Ask</span></span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>Before diving into data processing and visualization, it's essential to take note of the following key events: the Covid-19 pandemic since spring 2020, the strained relationship between China and Lithuania due to the Taiwan question, and the Russian invasion of Ukraine in 2022.</span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a>The Covid-19 pandemic has brought unprecedented changes to the global economy, and Lithuania was no exception. The outbreak caused major disruptions in global trade, resulting in a decline in demand for Lithuanian goods and services. On the other hand, Lithuania's relationship with China has been deteriorating due to the Taiwan question. This has led to a decrease in exports to China, one of Lithuania's top trading partners.</span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a>The Russian invasion of Ukraine in 2022 has also had a significant impact on Lithuania's trade patterns. The conflict has resulted in the imposition of economic sanctions on Russia, affecting Lithuania's trade with its Eastern neighbor. The situation is still developing, and it will be interesting to see how Lithuania's trade with Russia evolves in the coming years.</span>
<span id="cb8-23"><a href="#cb8-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-24"><a href="#cb8-24" aria-hidden="true" tabindex="-1"></a><span class="fu">## Prepare</span></span>
<span id="cb8-25"><a href="#cb8-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-26"><a href="#cb8-26" aria-hidden="true" tabindex="-1"></a>The data was downloaded from the Lithuanian National <span class="co">[</span><span class="ot">website</span><span class="co">](https://www.lb.lt/en/export-and-import-of-services-by-country)</span> in an Excel file format. You can also find the same file in my blog's Github <span class="co">[</span><span class="ot">repo</span><span class="co">](https://github.com/TK-Problem/personal-website/tree/main/posts/google-analytics-capstone)</span>. It was then loaded into the R environment using the <span class="in">`tidyverse`</span> library and converted to <span class="in">`data.table`</span> format.</span>
<span id="cb8-27"><a href="#cb8-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-30"><a href="#cb8-30" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb8-31"><a href="#cb8-31" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb8-32"><a href="#cb8-32" aria-hidden="true" tabindex="-1"></a><span class="co"># load libraries</span></span>
<span id="cb8-33"><a href="#cb8-33" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb8-34"><a href="#cb8-34" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(data.table)</span>
<span id="cb8-35"><a href="#cb8-35" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(kableExtra)</span>
<span id="cb8-36"><a href="#cb8-36" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(plotly)</span>
<span id="cb8-37"><a href="#cb8-37" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(zoo)</span>
<span id="cb8-38"><a href="#cb8-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-39"><a href="#cb8-39" aria-hidden="true" tabindex="-1"></a><span class="co"># read data from excel</span></span>
<span id="cb8-40"><a href="#cb8-40" aria-hidden="true" tabindex="-1"></a>dt <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">"lb_data.xlsx"</span>, <span class="at">sheet =</span> <span class="dv">1</span>, <span class="at">range =</span> <span class="st">"A13:AN201"</span>)</span>
<span id="cb8-41"><a href="#cb8-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-42"><a href="#cb8-42" aria-hidden="true" tabindex="-1"></a><span class="co"># convert to data.table object</span></span>
<span id="cb8-43"><a href="#cb8-43" aria-hidden="true" tabindex="-1"></a>dt <span class="ot">&lt;-</span> <span class="fu">data.table</span>(dt)</span>
<span id="cb8-44"><a href="#cb8-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-45"><a href="#cb8-45" aria-hidden="true" tabindex="-1"></a><span class="co"># rename columns for convinience</span></span>
<span id="cb8-46"><a href="#cb8-46" aria-hidden="true" tabindex="-1"></a><span class="fu">setnames</span>(dt, <span class="fu">c</span>(<span class="st">"...1"</span>), <span class="st">"Type"</span>)</span>
<span id="cb8-47"><a href="#cb8-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-48"><a href="#cb8-48" aria-hidden="true" tabindex="-1"></a><span class="co"># shift columns to get correct names</span></span>
<span id="cb8-49"><a href="#cb8-49" aria-hidden="true" tabindex="-1"></a>dt[, Country <span class="sc">:</span><span class="er">=</span> <span class="fu">rep</span>(dt[<span class="fu">seq</span>(<span class="dv">1</span>, <span class="fu">nrow</span>(dt), <span class="dv">4</span>), Type], <span class="at">each =</span> <span class="dv">4</span>)]</span>
<span id="cb8-50"><a href="#cb8-50" aria-hidden="true" tabindex="-1"></a>dt <span class="ot">&lt;-</span> dt[<span class="sc">!</span>(<span class="fu">seq</span>(<span class="dv">1</span>, <span class="fu">nrow</span>(dt), <span class="dv">4</span>))]</span>
<span id="cb8-51"><a href="#cb8-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-52"><a href="#cb8-52" aria-hidden="true" tabindex="-1"></a><span class="co"># generate table with first few rows and columns</span></span>
<span id="cb8-53"><a href="#cb8-53" aria-hidden="true" tabindex="-1"></a><span class="fu">kbl</span>(dt[<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>, <span class="fu">c</span>(<span class="dv">41</span>, <span class="dv">1</span>, <span class="dv">38</span>, <span class="dv">39</span>, <span class="dv">40</span>)]) <span class="sc">%&gt;%</span></span>
<span id="cb8-54"><a href="#cb8-54" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>(<span class="at">bootstrap_options =</span> <span class="fu">c</span>(<span class="st">"striped"</span>, <span class="st">"hover"</span>, <span class="st">"condensed"</span>))</span>
<span id="cb8-55"><a href="#cb8-55" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb8-56"><a href="#cb8-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-57"><a href="#cb8-57" aria-hidden="true" tabindex="-1"></a>In the table above, you can see the total exports and imports of all countries, as well as those of the European Union's (27 countries) for the three most recent quarters. Even before data cleaning and preparation, a visual analysis shows that a majority of exports and imports go to EU countries. Data is available about 41 unique countries.</span>
<span id="cb8-58"><a href="#cb8-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-59"><a href="#cb8-59" aria-hidden="true" tabindex="-1"></a><span class="fu">## Process</span></span>
<span id="cb8-60"><a href="#cb8-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-61"><a href="#cb8-61" aria-hidden="true" tabindex="-1"></a>For this project, we didn't need to do much data cleaning or processing since there were no missing values or unknown formats. However, we did make some minor formatting adjustments in the <span class="in">`Prepare`</span> section. To keep things simple, I decided not to split this section into different parts.</span>
<span id="cb8-62"><a href="#cb8-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-63"><a href="#cb8-63" aria-hidden="true" tabindex="-1"></a><span class="fu">## Analyze</span></span>
<span id="cb8-64"><a href="#cb8-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-65"><a href="#cb8-65" aria-hidden="true" tabindex="-1"></a>After formatting and sorting the data, I investigated export changes of top 10 largest export destinations in 2003 Q3. Exports across European countries saw a substantial increase, with some countries experiencing growth rates of between 200-700%, exports to Belarus and Russia dropped significantly by 60% and 50%, respectively.</span>
<span id="cb8-66"><a href="#cb8-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-69"><a href="#cb8-69" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb8-70"><a href="#cb8-70" aria-hidden="true" tabindex="-1"></a><span class="co"># select exports data and exclude aggregated entires</span></span>
<span id="cb8-71"><a href="#cb8-71" aria-hidden="true" tabindex="-1"></a>agg <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Total"</span>, <span class="st">"European Union (27 countries)"</span>, <span class="st">"Euro Area (18 countries)"</span>, <span class="st">"Commonwealth of Independent States"</span>, <span class="st">"Offshore financial centers"</span>, <span class="st">"Other countries"</span>)</span>
<span id="cb8-72"><a href="#cb8-72" aria-hidden="true" tabindex="-1"></a>dt.export <span class="ot">&lt;-</span> <span class="fu">copy</span>(dt[Type <span class="sc">==</span> <span class="st">"Exports"</span> <span class="sc">&amp;</span> <span class="sc">!</span>Country <span class="sc">%in%</span> agg])</span>
<span id="cb8-73"><a href="#cb8-73" aria-hidden="true" tabindex="-1"></a>dt.export[, <span class="st">`</span><span class="at">Change, %</span><span class="st">`</span> <span class="sc">:</span><span class="er">=</span> <span class="fu">round</span>((<span class="st">`</span><span class="at">Q3/2022</span><span class="st">`</span> <span class="sc">/</span> <span class="st">`</span><span class="at">Q3/2013</span><span class="st">`</span> <span class="sc">-</span> <span class="dv">1</span>) <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">1</span>)]</span>
<span id="cb8-74"><a href="#cb8-74" aria-hidden="true" tabindex="-1"></a><span class="co"># get top 10 starting and last period countries by export</span></span>
<span id="cb8-75"><a href="#cb8-75" aria-hidden="true" tabindex="-1"></a>start <span class="ot">&lt;-</span> <span class="fu">tail</span>(dt.export[, <span class="fu">c</span>(<span class="dv">41</span>, <span class="dv">4</span>, <span class="dv">40</span>)][<span class="fu">order</span>(<span class="st">`</span><span class="at">Q3/2013</span><span class="st">`</span>)], <span class="dv">10</span>)</span>
<span id="cb8-76"><a href="#cb8-76" aria-hidden="true" tabindex="-1"></a><span class="co"># generate kable table</span></span>
<span id="cb8-77"><a href="#cb8-77" aria-hidden="true" tabindex="-1"></a><span class="fu">kbl</span>(start, <span class="at">caption =</span> <span class="st">"Top 10 largest export destinations in 2013 Q3"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb8-78"><a href="#cb8-78" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>(<span class="at">bootstrap_options =</span> <span class="fu">c</span>(<span class="st">"striped"</span>, <span class="st">"hover"</span>, <span class="st">"condensed"</span>))</span>
<span id="cb8-79"><a href="#cb8-79" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb8-80"><a href="#cb8-80" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-81"><a href="#cb8-81" aria-hidden="true" tabindex="-1"></a>I found it interesting to observe that out of the 41 countries with known data, there were export reductions in only four countries: Egypt, Russia, Belarus, and Japan. Furthermore, I noticed that the largest export changes were seen in countries with relatively small exports in 2003 Q3, such as Croatia and Malta, whose exports increased 40 times. It's worth noting that Canada, a large economy, also saw a significant increase in exports, which grew almost 30 times.</span>
<span id="cb8-82"><a href="#cb8-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-85"><a href="#cb8-85" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb8-86"><a href="#cb8-86" aria-hidden="true" tabindex="-1"></a><span class="co"># get top 10 starting and last period countries by export</span></span>
<span id="cb8-87"><a href="#cb8-87" aria-hidden="true" tabindex="-1"></a>top_change <span class="ot">&lt;-</span> <span class="fu">tail</span>(dt.export[, <span class="fu">c</span>(<span class="dv">41</span>, <span class="dv">4</span>, <span class="dv">40</span>, <span class="dv">42</span>)][<span class="fu">order</span>(<span class="st">`</span><span class="at">Change, %</span><span class="st">`</span>)], <span class="dv">5</span>)</span>
<span id="cb8-88"><a href="#cb8-88" aria-hidden="true" tabindex="-1"></a>low_change <span class="ot">&lt;-</span> <span class="fu">head</span>(dt.export[, <span class="fu">c</span>(<span class="dv">41</span>, <span class="dv">4</span>, <span class="dv">40</span>, <span class="dv">42</span>)][<span class="fu">order</span>(<span class="st">`</span><span class="at">Change, %</span><span class="st">`</span>)], <span class="dv">5</span>)</span>
<span id="cb8-89"><a href="#cb8-89" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-90"><a href="#cb8-90" aria-hidden="true" tabindex="-1"></a><span class="co"># get changes</span></span>
<span id="cb8-91"><a href="#cb8-91" aria-hidden="true" tabindex="-1"></a>dt.changes <span class="ot">&lt;-</span> <span class="fu">rbind</span>(low_change, top_change)</span>
<span id="cb8-92"><a href="#cb8-92" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-93"><a href="#cb8-93" aria-hidden="true" tabindex="-1"></a><span class="co"># generate kable table</span></span>
<span id="cb8-94"><a href="#cb8-94" aria-hidden="true" tabindex="-1"></a><span class="fu">kbl</span>(dt.changes, <span class="at">caption =</span> <span class="st">"Top 5 largest positive and negative export changes"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb8-95"><a href="#cb8-95" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>(<span class="at">bootstrap_options =</span> <span class="fu">c</span>(<span class="st">"striped"</span>, <span class="st">"hover"</span>, <span class="st">"condensed"</span>))</span>
<span id="cb8-96"><a href="#cb8-96" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb8-97"><a href="#cb8-97" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-98"><a href="#cb8-98" aria-hidden="true" tabindex="-1"></a>Regarding imports, I observed that imports were reduced to only three countries: Finland, Belarus, and Russia. It is worth noting that imports from Japan increased by 80%, which is in contrast to the reduced exports by 26%. Lastly, I observed that imports from Portugal increased by 35 times.</span>
<span id="cb8-99"><a href="#cb8-99" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-102"><a href="#cb8-102" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb8-103"><a href="#cb8-103" aria-hidden="true" tabindex="-1"></a><span class="co"># select exports data and exclude aggregated entires</span></span>
<span id="cb8-104"><a href="#cb8-104" aria-hidden="true" tabindex="-1"></a>agg <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Total"</span>, <span class="st">"European Union (27 countries)"</span>, <span class="st">"Euro Area (18 countries)"</span>, <span class="st">"Commonwealth of Independent States"</span>, <span class="st">"Offshore financial centers"</span>, <span class="st">"Other countries"</span>)</span>
<span id="cb8-105"><a href="#cb8-105" aria-hidden="true" tabindex="-1"></a>dt.import <span class="ot">&lt;-</span> <span class="fu">copy</span>(dt[Type <span class="sc">==</span> <span class="st">"Imports"</span> <span class="sc">&amp;</span> <span class="sc">!</span>Country <span class="sc">%in%</span> agg])</span>
<span id="cb8-106"><a href="#cb8-106" aria-hidden="true" tabindex="-1"></a>dt.import[, <span class="st">`</span><span class="at">Change, %</span><span class="st">`</span> <span class="sc">:</span><span class="er">=</span> <span class="fu">round</span>((<span class="st">`</span><span class="at">Q3/2022</span><span class="st">`</span> <span class="sc">/</span> <span class="st">`</span><span class="at">Q3/2013</span><span class="st">`</span> <span class="sc">-</span> <span class="dv">1</span>) <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">1</span>)]</span>
<span id="cb8-107"><a href="#cb8-107" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-108"><a href="#cb8-108" aria-hidden="true" tabindex="-1"></a><span class="co"># get top 10 starting and last period countries by export</span></span>
<span id="cb8-109"><a href="#cb8-109" aria-hidden="true" tabindex="-1"></a>top_change <span class="ot">&lt;-</span> <span class="fu">tail</span>(dt.import[, <span class="fu">c</span>(<span class="dv">41</span>, <span class="dv">4</span>, <span class="dv">40</span>, <span class="dv">42</span>)][<span class="fu">order</span>(<span class="st">`</span><span class="at">Change, %</span><span class="st">`</span>)], <span class="dv">5</span>)</span>
<span id="cb8-110"><a href="#cb8-110" aria-hidden="true" tabindex="-1"></a>low_change <span class="ot">&lt;-</span> <span class="fu">head</span>(dt.import[, <span class="fu">c</span>(<span class="dv">41</span>, <span class="dv">4</span>, <span class="dv">40</span>, <span class="dv">42</span>)][<span class="fu">order</span>(<span class="st">`</span><span class="at">Change, %</span><span class="st">`</span>)], <span class="dv">5</span>)</span>
<span id="cb8-111"><a href="#cb8-111" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-112"><a href="#cb8-112" aria-hidden="true" tabindex="-1"></a><span class="co"># get changes</span></span>
<span id="cb8-113"><a href="#cb8-113" aria-hidden="true" tabindex="-1"></a>dt.changes <span class="ot">&lt;-</span> <span class="fu">rbind</span>(low_change, top_change)</span>
<span id="cb8-114"><a href="#cb8-114" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-115"><a href="#cb8-115" aria-hidden="true" tabindex="-1"></a><span class="co"># generate kable table</span></span>
<span id="cb8-116"><a href="#cb8-116" aria-hidden="true" tabindex="-1"></a><span class="fu">kbl</span>(dt.changes, <span class="at">caption =</span> <span class="st">"Top 5 largest positive and negative import changes"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb8-117"><a href="#cb8-117" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>(<span class="at">bootstrap_options =</span> <span class="fu">c</span>(<span class="st">"striped"</span>, <span class="st">"hover"</span>, <span class="st">"condensed"</span>))</span>
<span id="cb8-118"><a href="#cb8-118" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb8-119"><a href="#cb8-119" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-120"><a href="#cb8-120" aria-hidden="true" tabindex="-1"></a>Overall, this analysis highlights the importance of careful observation and analysis of data to uncover trends and patterns that can inform strategic decision-making for businesses and policymakers alike.</span>
<span id="cb8-121"><a href="#cb8-121" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-122"><a href="#cb8-122" aria-hidden="true" tabindex="-1"></a><span class="fu">## Share</span></span>
<span id="cb8-123"><a href="#cb8-123" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-124"><a href="#cb8-124" aria-hidden="true" tabindex="-1"></a>Let's start from visualizing total export and import changes over time.</span>
<span id="cb8-125"><a href="#cb8-125" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-128"><a href="#cb8-128" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb8-129"><a href="#cb8-129" aria-hidden="true" tabindex="-1"></a><span class="co"># select data for plotting</span></span>
<span id="cb8-130"><a href="#cb8-130" aria-hidden="true" tabindex="-1"></a>dt.plot<span class="fl">.1</span> <span class="ot">&lt;-</span> <span class="fu">melt</span>(dt, <span class="at">id.vars =</span> <span class="fu">c</span>(<span class="st">"Country"</span>, <span class="st">"Type"</span>), <span class="at">variable.name =</span> <span class="st">"Quarter"</span>)</span>
<span id="cb8-131"><a href="#cb8-131" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-132"><a href="#cb8-132" aria-hidden="true" tabindex="-1"></a><span class="co"># convert to datetime</span></span>
<span id="cb8-133"><a href="#cb8-133" aria-hidden="true" tabindex="-1"></a>dt.plot<span class="fl">.1</span>[, Quarter <span class="sc">:</span><span class="er">=</span> <span class="fu">as.Date</span>(<span class="fu">as.yearqtr</span>(Quarter, <span class="at">format =</span> <span class="st">"Q%q/%Y"</span>), <span class="at">frac =</span> <span class="dv">1</span>)]</span>
<span id="cb8-134"><a href="#cb8-134" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-135"><a href="#cb8-135" aria-hidden="true" tabindex="-1"></a><span class="co"># colors for plotting</span></span>
<span id="cb8-136"><a href="#cb8-136" aria-hidden="true" tabindex="-1"></a>pal <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"#6699ff"</span>, <span class="st">"#ff6666"</span>)</span>
<span id="cb8-137"><a href="#cb8-137" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-138"><a href="#cb8-138" aria-hidden="true" tabindex="-1"></a><span class="co"># create figure</span></span>
<span id="cb8-139"><a href="#cb8-139" aria-hidden="true" tabindex="-1"></a>fig <span class="ot">&lt;-</span> <span class="fu">plot_ly</span>(<span class="at">data =</span> dt.plot<span class="fl">.1</span>[Type <span class="sc">!=</span> <span class="st">"Balance"</span> <span class="sc">&amp;</span> Country <span class="sc">==</span> <span class="st">'Total'</span>],</span>
<span id="cb8-140"><a href="#cb8-140" aria-hidden="true" tabindex="-1"></a>               <span class="at">type =</span> <span class="st">'scatter'</span>, <span class="at">mode =</span> <span class="st">'lines+markers'</span>,</span>
<span id="cb8-141"><a href="#cb8-141" aria-hidden="true" tabindex="-1"></a>               <span class="at">x =</span> <span class="sc">~</span>Quarter, <span class="at">y =</span> <span class="sc">~</span>value, <span class="at">color =</span> <span class="sc">~</span>Type, <span class="at">colors =</span> pal)</span>
<span id="cb8-142"><a href="#cb8-142" aria-hidden="true" tabindex="-1"></a><span class="co"># update layout</span></span>
<span id="cb8-143"><a href="#cb8-143" aria-hidden="true" tabindex="-1"></a>fig <span class="ot">&lt;-</span> fig <span class="sc">%&gt;%</span> <span class="fu">layout</span>(<span class="at">title =</span> <span class="st">"Total import and export volumes over time"</span>,</span>
<span id="cb8-144"><a href="#cb8-144" aria-hidden="true" tabindex="-1"></a>                      <span class="at">xaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">"Date"</span>),</span>
<span id="cb8-145"><a href="#cb8-145" aria-hidden="true" tabindex="-1"></a>                      <span class="at">yaxis =</span> <span class="fu">list</span> (<span class="at">title =</span> <span class="st">"Volumne, M EUR"</span>))</span>
<span id="cb8-146"><a href="#cb8-146" aria-hidden="true" tabindex="-1"></a>fig</span>
<span id="cb8-147"><a href="#cb8-147" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb8-148"><a href="#cb8-148" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-149"><a href="#cb8-149" aria-hidden="true" tabindex="-1"></a>There has been a significant increase in both total imports and exports, with a four-fold increase in imports and a three-fold increase in exports. However, during the first three quarters of 2020, there was a marked decline in both exports and imports, which can be attributed to the impact of Covid-19.</span>
<span id="cb8-150"><a href="#cb8-150" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-153"><a href="#cb8-153" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb8-154"><a href="#cb8-154" aria-hidden="true" tabindex="-1"></a><span class="co"># select data for plotting</span></span>
<span id="cb8-155"><a href="#cb8-155" aria-hidden="true" tabindex="-1"></a>dt.plot<span class="fl">.2</span> <span class="ot">&lt;-</span> <span class="fu">copy</span>(dt.plot<span class="fl">.1</span>[Country <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Total"</span>, <span class="st">"European Union (27 countries)"</span>, <span class="st">"Russia"</span>, <span class="st">"China"</span>)])</span>
<span id="cb8-156"><a href="#cb8-156" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-157"><a href="#cb8-157" aria-hidden="true" tabindex="-1"></a><span class="co"># reshape table</span></span>
<span id="cb8-158"><a href="#cb8-158" aria-hidden="true" tabindex="-1"></a>dt.plot<span class="fl">.2</span> <span class="ot">&lt;-</span> <span class="fu">dcast</span>(dt.plot<span class="fl">.2</span>, Quarter<span class="sc">+</span>Type<span class="sc">~</span>Country, <span class="at">value.var =</span> <span class="st">"value"</span>)</span>
<span id="cb8-159"><a href="#cb8-159" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-160"><a href="#cb8-160" aria-hidden="true" tabindex="-1"></a><span class="co"># calculate share to Total values</span></span>
<span id="cb8-161"><a href="#cb8-161" aria-hidden="true" tabindex="-1"></a>dt.plot<span class="fl">.2</span>[, <span class="st">`</span><span class="at">EU (27 countries) share, %</span><span class="st">`</span> <span class="sc">:</span><span class="er">=</span> <span class="fu">round</span>(<span class="st">`</span><span class="at">European Union (27 countries)</span><span class="st">`</span> <span class="sc">/</span> Total <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">2</span>)]</span>
<span id="cb8-162"><a href="#cb8-162" aria-hidden="true" tabindex="-1"></a>dt.plot<span class="fl">.2</span>[, <span class="st">`</span><span class="at">Russia share, %</span><span class="st">`</span> <span class="sc">:</span><span class="er">=</span> <span class="fu">round</span>(<span class="st">`</span><span class="at">Russia</span><span class="st">`</span> <span class="sc">/</span> Total <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">2</span>)]</span>
<span id="cb8-163"><a href="#cb8-163" aria-hidden="true" tabindex="-1"></a>dt.plot<span class="fl">.2</span>[, <span class="st">`</span><span class="at">China share, %</span><span class="st">`</span> <span class="sc">:</span><span class="er">=</span> <span class="fu">round</span>(<span class="st">`</span><span class="at">China</span><span class="st">`</span> <span class="sc">/</span> Total <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">2</span>)]</span>
<span id="cb8-164"><a href="#cb8-164" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-165"><a href="#cb8-165" aria-hidden="true" tabindex="-1"></a><span class="co"># colors</span></span>
<span id="cb8-166"><a href="#cb8-166" aria-hidden="true" tabindex="-1"></a>eu.color <span class="ot">&lt;-</span> <span class="st">'rgb(22, 96, 167)'</span></span>
<span id="cb8-167"><a href="#cb8-167" aria-hidden="true" tabindex="-1"></a>ru.color <span class="ot">&lt;-</span> <span class="st">'rgb(205, 12, 24)'</span></span>
<span id="cb8-168"><a href="#cb8-168" aria-hidden="true" tabindex="-1"></a>ch.color <span class="ot">&lt;-</span> <span class="st">'rgb(0, 128, 0)'</span></span>
<span id="cb8-169"><a href="#cb8-169" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-170"><a href="#cb8-170" aria-hidden="true" tabindex="-1"></a><span class="co"># create figure (imports)</span></span>
<span id="cb8-171"><a href="#cb8-171" aria-hidden="true" tabindex="-1"></a>fig <span class="ot">&lt;-</span> <span class="fu">plot_ly</span>(dt.plot<span class="fl">.2</span>[Type <span class="sc">==</span> <span class="st">'Imports'</span>],</span>
<span id="cb8-172"><a href="#cb8-172" aria-hidden="true" tabindex="-1"></a>               <span class="at">x =</span> <span class="sc">~</span>Quarter, <span class="at">y =</span> <span class="sc">~</span><span class="st">`</span><span class="at">EU (27 countries) share, %</span><span class="st">`</span>,</span>
<span id="cb8-173"><a href="#cb8-173" aria-hidden="true" tabindex="-1"></a>               <span class="at">name =</span> <span class="st">'EU (27 countries) imports'</span>, <span class="at">type =</span> <span class="st">'scatter'</span>, <span class="at">mode =</span> <span class="st">'lines'</span>,</span>
<span id="cb8-174"><a href="#cb8-174" aria-hidden="true" tabindex="-1"></a>               <span class="at">line =</span> <span class="fu">list</span>(<span class="at">color =</span> eu.color, <span class="at">width =</span> <span class="dv">4</span>))</span>
<span id="cb8-175"><a href="#cb8-175" aria-hidden="true" tabindex="-1"></a>fig <span class="ot">&lt;-</span> fig <span class="sc">%&gt;%</span> <span class="fu">add_trace</span>(<span class="at">y =</span> <span class="sc">~</span><span class="st">`</span><span class="at">Russia share, %</span><span class="st">`</span>,</span>
<span id="cb8-176"><a href="#cb8-176" aria-hidden="true" tabindex="-1"></a>                         <span class="at">name =</span> <span class="st">'Russia imports'</span>,</span>
<span id="cb8-177"><a href="#cb8-177" aria-hidden="true" tabindex="-1"></a>                         <span class="at">line =</span> <span class="fu">list</span>(<span class="at">color =</span> ru.color, <span class="at">width =</span> <span class="dv">4</span>))</span>
<span id="cb8-178"><a href="#cb8-178" aria-hidden="true" tabindex="-1"></a>fig <span class="ot">&lt;-</span> fig <span class="sc">%&gt;%</span> <span class="fu">add_trace</span>(<span class="at">y =</span> <span class="sc">~</span><span class="st">`</span><span class="at">China share, %</span><span class="st">`</span>,</span>
<span id="cb8-179"><a href="#cb8-179" aria-hidden="true" tabindex="-1"></a>                         <span class="at">name =</span> <span class="st">'China imports'</span>,</span>
<span id="cb8-180"><a href="#cb8-180" aria-hidden="true" tabindex="-1"></a>                         <span class="at">line =</span> <span class="fu">list</span>(<span class="at">color =</span> ch.color, <span class="at">width =</span> <span class="dv">4</span>))</span>
<span id="cb8-181"><a href="#cb8-181" aria-hidden="true" tabindex="-1"></a><span class="co"># add exports</span></span>
<span id="cb8-182"><a href="#cb8-182" aria-hidden="true" tabindex="-1"></a>fig <span class="ot">&lt;-</span> fig <span class="sc">%&gt;%</span> <span class="fu">add_trace</span>(<span class="at">x =</span> dt.plot<span class="fl">.2</span>[Type <span class="sc">==</span> <span class="st">'Exports'</span>]<span class="sc">$</span>Quarter,</span>
<span id="cb8-183"><a href="#cb8-183" aria-hidden="true" tabindex="-1"></a>                         <span class="at">y =</span> dt.plot<span class="fl">.2</span>[Type <span class="sc">==</span> <span class="st">'Exports'</span>]<span class="sc">$</span><span class="st">`</span><span class="at">EU (27 countries) share, %</span><span class="st">`</span>,</span>
<span id="cb8-184"><a href="#cb8-184" aria-hidden="true" tabindex="-1"></a>                         <span class="at">name =</span> <span class="st">'EU (27 countries) exports'</span>,</span>
<span id="cb8-185"><a href="#cb8-185" aria-hidden="true" tabindex="-1"></a>                         <span class="at">line =</span> <span class="fu">list</span>(<span class="at">color =</span> eu.color, <span class="at">width =</span> <span class="dv">4</span>, <span class="at">dash =</span> <span class="st">'dash'</span>))</span>
<span id="cb8-186"><a href="#cb8-186" aria-hidden="true" tabindex="-1"></a>fig <span class="ot">&lt;-</span> fig <span class="sc">%&gt;%</span> <span class="fu">add_trace</span>(<span class="at">x =</span> dt.plot<span class="fl">.2</span>[Type <span class="sc">==</span> <span class="st">'Exports'</span>]<span class="sc">$</span>Quarter,</span>
<span id="cb8-187"><a href="#cb8-187" aria-hidden="true" tabindex="-1"></a>                         <span class="at">y =</span> dt.plot<span class="fl">.2</span>[Type <span class="sc">==</span> <span class="st">'Exports'</span>]<span class="sc">$</span><span class="st">`</span><span class="at">Russia share, %</span><span class="st">`</span>,</span>
<span id="cb8-188"><a href="#cb8-188" aria-hidden="true" tabindex="-1"></a>                         <span class="at">name =</span> <span class="st">'Russia exports'</span>,</span>
<span id="cb8-189"><a href="#cb8-189" aria-hidden="true" tabindex="-1"></a>                         <span class="at">line =</span> <span class="fu">list</span>(<span class="at">color =</span> ru.color, <span class="at">width =</span> <span class="dv">4</span>, <span class="at">dash =</span> <span class="st">'dash'</span>))</span>
<span id="cb8-190"><a href="#cb8-190" aria-hidden="true" tabindex="-1"></a>fig <span class="ot">&lt;-</span> fig <span class="sc">%&gt;%</span> <span class="fu">add_trace</span>(<span class="at">x =</span> dt.plot<span class="fl">.2</span>[Type <span class="sc">==</span> <span class="st">'Exports'</span>]<span class="sc">$</span>Quarter,</span>
<span id="cb8-191"><a href="#cb8-191" aria-hidden="true" tabindex="-1"></a>                         <span class="at">y =</span> dt.plot<span class="fl">.2</span>[Type <span class="sc">==</span> <span class="st">'Exports'</span>]<span class="sc">$</span><span class="st">`</span><span class="at">China share, %</span><span class="st">`</span>,</span>
<span id="cb8-192"><a href="#cb8-192" aria-hidden="true" tabindex="-1"></a>                         <span class="at">name =</span> <span class="st">'China exports'</span>,</span>
<span id="cb8-193"><a href="#cb8-193" aria-hidden="true" tabindex="-1"></a>                         <span class="at">line =</span> <span class="fu">list</span>(<span class="at">color =</span> ch.color, <span class="at">width =</span> <span class="dv">4</span>, <span class="at">dash =</span> <span class="st">'dash'</span>))</span>
<span id="cb8-194"><a href="#cb8-194" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-195"><a href="#cb8-195" aria-hidden="true" tabindex="-1"></a><span class="co"># update layout</span></span>
<span id="cb8-196"><a href="#cb8-196" aria-hidden="true" tabindex="-1"></a>fig <span class="ot">&lt;-</span> fig <span class="sc">%&gt;%</span> <span class="fu">layout</span>(<span class="at">title =</span> <span class="st">"Total import and export volumes over time"</span>,</span>
<span id="cb8-197"><a href="#cb8-197" aria-hidden="true" tabindex="-1"></a>                      <span class="at">xaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">"Date"</span>),</span>
<span id="cb8-198"><a href="#cb8-198" aria-hidden="true" tabindex="-1"></a>                      <span class="at">yaxis =</span> <span class="fu">list</span> (<span class="at">title =</span> <span class="st">"Share to total, %"</span>))</span>
<span id="cb8-199"><a href="#cb8-199" aria-hidden="true" tabindex="-1"></a>fig</span>
<span id="cb8-200"><a href="#cb8-200" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb8-201"><a href="#cb8-201" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-202"><a href="#cb8-202" aria-hidden="true" tabindex="-1"></a>The European Union has seen a significant increase in the proportion of imports in their total volume, which has increased by 50%. This means that the EU is becoming more reliant on imports and is potentially exporting less to other countries.</span>
<span id="cb8-203"><a href="#cb8-203" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-204"><a href="#cb8-204" aria-hidden="true" tabindex="-1"></a>When it comes to trade with Russia, both imports and exports have been declining steadily even before the start of the 2022 war. Prior to the war, Lithuania was a net importer with Russian trade. Surprisingly, tensions between China and Lithuania did not have a significant impact on their trade relationship, and the share of total imports from China increased almost 5 times.</span>
<span id="cb8-205"><a href="#cb8-205" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-206"><a href="#cb8-206" aria-hidden="true" tabindex="-1"></a>Finally let's analyze how imports and exports were affected with Countries close to Russia.</span>
<span id="cb8-207"><a href="#cb8-207" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-210"><a href="#cb8-210" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb8-211"><a href="#cb8-211" aria-hidden="true" tabindex="-1"></a><span class="co"># countries to select</span></span>
<span id="cb8-212"><a href="#cb8-212" aria-hidden="true" tabindex="-1"></a>country.list <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Kazakhstan"</span>, <span class="st">"Belarus"</span>, <span class="st">"Russia"</span>, <span class="st">"Turkey"</span>, <span class="st">"Offshore financial centers"</span>)</span>
<span id="cb8-213"><a href="#cb8-213" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-214"><a href="#cb8-214" aria-hidden="true" tabindex="-1"></a><span class="co"># select data for plotting</span></span>
<span id="cb8-215"><a href="#cb8-215" aria-hidden="true" tabindex="-1"></a>dt.plot<span class="fl">.3</span> <span class="ot">&lt;-</span> <span class="fu">copy</span>(dt.plot<span class="fl">.1</span>[Country <span class="sc">%in%</span> country.list])</span>
<span id="cb8-216"><a href="#cb8-216" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-217"><a href="#cb8-217" aria-hidden="true" tabindex="-1"></a><span class="co"># reshape table</span></span>
<span id="cb8-218"><a href="#cb8-218" aria-hidden="true" tabindex="-1"></a>dt.plot<span class="fl">.3</span> <span class="ot">&lt;-</span> <span class="fu">dcast</span>(dt.plot<span class="fl">.3</span>, Quarter<span class="sc">+</span>Type<span class="sc">~</span>Country, <span class="at">value.var =</span> <span class="st">"value"</span>)</span>
<span id="cb8-219"><a href="#cb8-219" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-220"><a href="#cb8-220" aria-hidden="true" tabindex="-1"></a><span class="co"># reshape back</span></span>
<span id="cb8-221"><a href="#cb8-221" aria-hidden="true" tabindex="-1"></a>dt.plot<span class="fl">.3</span> <span class="ot">&lt;-</span> <span class="fu">melt</span>(dt.plot<span class="fl">.3</span>, <span class="at">id.vars =</span> <span class="fu">c</span>(<span class="st">"Quarter"</span>, <span class="st">"Type"</span>), <span class="at">variable.name =</span> <span class="st">"Country"</span>)</span>
<span id="cb8-222"><a href="#cb8-222" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-223"><a href="#cb8-223" aria-hidden="true" tabindex="-1"></a><span class="co"># create new label</span></span>
<span id="cb8-224"><a href="#cb8-224" aria-hidden="true" tabindex="-1"></a>dt.plot<span class="fl">.3</span>[, label <span class="sc">:</span><span class="er">=</span> <span class="fu">paste</span>(Country, Type)]</span>
<span id="cb8-225"><a href="#cb8-225" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-226"><a href="#cb8-226" aria-hidden="true" tabindex="-1"></a><span class="co"># color dictionary</span></span>
<span id="cb8-227"><a href="#cb8-227" aria-hidden="true" tabindex="-1"></a>color.dict <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"#C5AFA4"</span>, <span class="st">"#CC7E85"</span>, <span class="st">"#CF4D6F"</span>, <span class="st">"#A36D90"</span>, <span class="st">"#76818E"</span>)</span>
<span id="cb8-228"><a href="#cb8-228" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-229"><a href="#cb8-229" aria-hidden="true" tabindex="-1"></a><span class="co"># left figure</span></span>
<span id="cb8-230"><a href="#cb8-230" aria-hidden="true" tabindex="-1"></a>fig1 <span class="ot">&lt;-</span> <span class="fu">plot_ly</span>(<span class="at">data =</span> dt.plot<span class="fl">.3</span>[Type <span class="sc">==</span> <span class="st">"Imports"</span>],</span>
<span id="cb8-231"><a href="#cb8-231" aria-hidden="true" tabindex="-1"></a>                <span class="at">x =</span> <span class="sc">~</span>Quarter, <span class="at">y =</span> <span class="sc">~</span>value, <span class="at">color=</span><span class="sc">~</span>label, <span class="at">colors =</span> color.dict,</span>
<span id="cb8-232"><a href="#cb8-232" aria-hidden="true" tabindex="-1"></a>                <span class="at">type =</span> <span class="st">'scatter'</span>, <span class="at">mode =</span> <span class="st">'lines+markers'</span>,</span>
<span id="cb8-233"><a href="#cb8-233" aria-hidden="true" tabindex="-1"></a>                <span class="at">marker =</span> <span class="fu">list</span>(<span class="at">line =</span> <span class="fu">list</span>(<span class="at">width =</span> <span class="dv">3</span>)))</span>
<span id="cb8-234"><a href="#cb8-234" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-235"><a href="#cb8-235" aria-hidden="true" tabindex="-1"></a><span class="co"># right figure</span></span>
<span id="cb8-236"><a href="#cb8-236" aria-hidden="true" tabindex="-1"></a>fig2 <span class="ot">&lt;-</span> <span class="fu">plot_ly</span>(<span class="at">data =</span> dt.plot<span class="fl">.3</span>[Type <span class="sc">==</span> <span class="st">"Exports"</span>],</span>
<span id="cb8-237"><a href="#cb8-237" aria-hidden="true" tabindex="-1"></a>                <span class="at">x =</span> <span class="sc">~</span>Quarter, <span class="at">y =</span> <span class="sc">~</span>value, <span class="at">color=</span><span class="sc">~</span>label,</span>
<span id="cb8-238"><a href="#cb8-238" aria-hidden="true" tabindex="-1"></a>                <span class="at">colors =</span> color.dict,</span>
<span id="cb8-239"><a href="#cb8-239" aria-hidden="true" tabindex="-1"></a>                <span class="at">type =</span> <span class="st">'scatter'</span>, <span class="at">mode =</span> <span class="st">'lines+markers'</span>,</span>
<span id="cb8-240"><a href="#cb8-240" aria-hidden="true" tabindex="-1"></a>                <span class="at">line =</span> <span class="fu">list</span>(<span class="at">dash =</span> <span class="st">'dot'</span>),</span>
<span id="cb8-241"><a href="#cb8-241" aria-hidden="true" tabindex="-1"></a>                <span class="at">marker =</span> <span class="fu">list</span>(<span class="at">line =</span> <span class="fu">list</span>(<span class="at">width =</span> <span class="dv">3</span>)))</span>
<span id="cb8-242"><a href="#cb8-242" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-243"><a href="#cb8-243" aria-hidden="true" tabindex="-1"></a>fig <span class="ot">&lt;-</span> <span class="fu">subplot</span>(fig1, fig2, <span class="at">nrows =</span> <span class="dv">2</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb8-244"><a href="#cb8-244" aria-hidden="true" tabindex="-1"></a>  <span class="fu">layout</span>(<span class="at">title =</span> <span class="st">'Exports and imports with countries close to Russia'</span>)</span>
<span id="cb8-245"><a href="#cb8-245" aria-hidden="true" tabindex="-1"></a>fig</span>
<span id="cb8-246"><a href="#cb8-246" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb8-247"><a href="#cb8-247" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-248"><a href="#cb8-248" aria-hidden="true" tabindex="-1"></a>Now, let's turn our attention to how trade with countries close to Russia has been affected. Since the Russian invasion of Ukraine, imports and exports with Turkey and Kazakhstan have increased 3-5 times. This increase may be attributed to companies trying to circumvent sanctions to Russia through exports to Kazakhstan. It's interesting to see how companies are adapting to changes in trade relationships and finding new opportunities to continue doing business.</span>
<span id="cb8-249"><a href="#cb8-249" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-250"><a href="#cb8-250" aria-hidden="true" tabindex="-1"></a><span class="fu">## Act</span></span>
<span id="cb8-251"><a href="#cb8-251" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-252"><a href="#cb8-252" aria-hidden="true" tabindex="-1"></a>In conclusion, my analysis offers insights that could be utilized in evaluating the impact of historical events on Lithuania's imports and exports. Based on the findings, several conclusions can be drawn:</span>
<span id="cb8-253"><a href="#cb8-253" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-254"><a href="#cb8-254" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>Firstly, the declines in imports and exports with Russia preceded the 2022 invasion to Ukraine. This finding suggests that the declining trade relationship between the two countries started since 2014 Crimea annexation.</span>
<span id="cb8-255"><a href="#cb8-255" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-256"><a href="#cb8-256" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>Secondly, the analysis revealed that political tensions over Taiwan did not have a substantial impact on exports to China.</span>
<span id="cb8-257"><a href="#cb8-257" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-258"><a href="#cb8-258" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>Finally, the data indicates that imports and exports to Kazakhstan have increased, potentially due to sanctions against Russia. This finding underscores the importance of considering the geopolitical context when imposing economical sanctions.</span>
<span id="cb8-259"><a href="#cb8-259" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-260"><a href="#cb8-260" aria-hidden="true" tabindex="-1"></a>Overall, the present study highlights the complexities of trade relationships between Lithuania and other countries.</span>
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->



</body></html>